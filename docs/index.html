<!DOCTYPE html><html lang="ru-RU"><head><title>Нагружаем банки</title><meta property="og:title" content="Нагружаем банки"><meta name="description" content="О технологиях и подходах реализации нагрузки в двух разных командах"><meta property="og:description" content="О технологиях и подходах реализации нагрузки в двух разных командах"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><style>@media screen{body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{-webkit-tap-highlight-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:0;color:inherit;cursor:pointer;font-size:inherit;opacity:.8;outline:none;padding:0;transition:opacity .2s linear}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:disabled{cursor:not-allowed;opacity:.15!important}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover{opacity:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:active{opacity:.6}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:not(:disabled){transition:none}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-prev{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNNjggOTAgMjggNTBsNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-next{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJtMzIgOTAgNDAtNDAtNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTQwIDcwSDIwVjUwbTIwIDBMMjAgNzBtNDAtNDBoMjB2MjBtLTIwIDAgMjAtMjAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTIwIDUwaDIwdjIwbS0yMCAwIDIwLTIwbTQwIDBINjBWMzBtMjAgMEw2MCA1MCIvPjwvc3ZnPg==")}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBkPSJNODcuOCA0Ny41Qzg5IDUwIDg3LjcgNTIgODUgNTJIMzVhOC43IDguNyAwIDAgMS03LjItNC41bC0xNS42LTMxQzExIDE0IDEyLjIgMTIgMTUgMTJoNTBhOC44IDguOCAwIDAgMSA3LjIgNC41ek02MCA1MnYzNm0tMTAgMGgyME00NSA0MmgyMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iNSIvPjwvc3ZnPg==") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}}.bespoke-marp-note,.bespoke-marp-osc,.bespoke-progress-parent{display:none;transition:none}@media screen{body,html{height:100%;margin:0}body{background:#000;overflow:hidden}svg.bespoke-marp-slide{content-visibility:hidden;opacity:0;pointer-events:none;z-index:-1}svg.bespoke-marp-slide.bespoke-marp-active{content-visibility:visible;opacity:1;pointer-events:auto;z-index:0}svg.bespoke-marp-slide.bespoke-marp-active.bespoke-marp-active-ready *{-webkit-animation-name:__bespoke_marp__!important;animation-name:__bespoke_marp__!important}@supports not (content-visibility:hidden){svg.bespoke-marp-slide[data-bespoke-marp-load=hideable]{display:none}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable].bespoke-marp-active{display:block}}[data-bespoke-marp-fragment=inactive]{visibility:hidden}body[data-bespoke-view=""] .bespoke-marp-parent,body[data-bespoke-view=next] .bespoke-marp-parent{bottom:0;left:0;position:absolute;right:0;top:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc{background:rgba(0,0,0,.65);border-radius:7px;bottom:50px;color:#fff;contain:paint;display:block;font-family:Helvetica,Arial,sans-serif;font-size:16px;left:50%;line-height:0;opacity:1;padding:12px;position:absolute;touch-action:manipulation;transform:translateX(-50%);transition:opacity .2s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;will-change:transform;z-index:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>*{margin-left:6px}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>:first-child{margin-left:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span{opacity:.8}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page]{display:inline-block;min-width:140px;text-align:center}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{height:32px;line-height:32px;width:32px}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive{cursor:none}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc{opacity:0;pointer-events:none}body[data-bespoke-view=""] svg.bespoke-marp-slide,body[data-bespoke-view=next] svg.bespoke-marp-slide{height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent{background:#222;display:flex;height:5px;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent+.bespoke-marp-parent{top:5px}body[data-bespoke-view=""] .bespoke-progress-parent .bespoke-progress-bar{background:#0288d1;flex:0 0 0;transition:flex-basis .2s cubic-bezier(0,1,1,1)}body[data-bespoke-view=next]{background:transparent}body[data-bespoke-view=presenter]{background:#161616}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container{display:grid;font-family:Helvetica,Arial,sans-serif;grid-template-areas:"current next" "current note" "info    note";grid-template-columns:2fr 1fr;grid-template-rows:minmax(140px,1fr) 2fr 3em;height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent{grid-area:current;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide{height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide.bespoke-marp-active{filter:drop-shadow(0 3px 10px rgba(0,0,0,.5))}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container{background:#222;cursor:pointer;display:none;grid-area:next;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container iframe.bespoke-marp-presenter-next{background:transparent;border:0;display:block;filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container{background:#222;color:#eee;grid-area:note}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note{word-wrap:break-word;box-sizing:border-box;font-size:1.1em;height:calc(100% - 40px);margin:20px;overflow:auto;padding-right:3px;scrollbar-color:hsla(0,0%,93%,.5) transparent;scrollbar-width:thin;white-space:pre-wrap;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar{width:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-track{background:transparent}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-thumb{background:hsla(0,0%,93%,.5);border-radius:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note:empty{pointer-events:none}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:first-child{margin-top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:last-child{margin-bottom:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container{align-items:center;box-sizing:border-box;color:#eee;display:flex;flex-wrap:nowrap;grid-area:info;justify-content:center;padding:0 10px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{box-sizing:border-box;display:block;padding:0 10px;white-space:nowrap;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page{order:2;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page .bespoke-marp-presenter-info-page-text{display:inline-block;min-width:120px;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time{color:#999;order:1;text-align:left}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{color:#999;order:3;text-align:right}}@media print{.bespoke-marp-presenter-info-container,.bespoke-marp-presenter-next-container,.bespoke-marp-presenter-note-container{display:none}}</style><style>@charset "UTF-8";@import url("https://fonts.googleapis.com/css?family=Roboto:400,700");@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap');@import url("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/github.min.css");div#p>svg>foreignObject>section{width:1280px;height:720px;box-sizing:border-box;overflow:hidden;position:relative;scroll-snap-align:center center}div#p>svg>foreignObject>section:after{bottom:0;content:attr(data-marpit-pagination);padding:inherit;pointer-events:none;position:absolute;right:0}div#p>svg>foreignObject>section:not([data-marpit-pagination]):after{display:none}/* Normalization */div#p>svg>foreignObject>section h1{font-size:2em;margin:0.67em 0}div#p>svg>foreignObject>section video::-webkit-media-controls{will-change:transform}@page{size:1280px 720px;margin:0}@media print{body,html{background-color:#fff;margin:0;page-break-inside:avoid;break-inside:avoid-page}div#p>svg>foreignObject>section{page-break-before:always;break-before:page}div#p>svg>foreignObject>section,div#p>svg>foreignObject>section *{-webkit-print-color-adjust:exact!important;animation-delay:0s!important;animation-duration:0s!important;color-adjust:exact!important;transition:none!important}div#p>svg[data-marpit-svg]{display:block;height:100vh;width:100vw}}div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{display:block;height:auto;width:100%}@supports (-ms-ime-align:auto){div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{position:static}}div#p>svg>foreignObject>section svg[data-marp-fitting=svg].__reflow__{content:""}@supports (-ms-ime-align:auto){div#p>svg>foreignObject>section svg[data-marp-fitting=svg].__reflow__{position:relative}}div#p>svg>foreignObject>section [data-marp-fitting-svg-content]{display:table;white-space:nowrap;width:-webkit-max-content;width:-moz-max-content;width:max-content}div#p>svg>foreignObject>section [data-marp-fitting-svg-content-wrap]{white-space:pre}div#p>svg>foreignObject>section img[data-marp-twemoji]{background:transparent;height:1em;margin:0 .05em 0 .1em;vertical-align:-.1em;width:1em}
/*!
 * Marp / Marpit VTB theme.
 *
 * @theme vtb_tks
 * @auto-scaling true
 * @author Smirnov Viacheslav
 */div#p>svg>foreignObject>section:not(a){--bg-color:#051830;--bg-color-error:#900258;--bg-color-half:#0518307d;--main-bg-color:#002882;--main-bg-color-half:#0028827d;--title-h1-color:#002882;--title-h2-color:#00AAFF;--bg-color-tks:#AFAFAF;--bg-color-tks:white;--bg-color-tks-half:#AFAFAF7d;--main-bg-color-tks:#474747;--main-bg-color-half-tks:#4747477d;--title-h1-color-tks:#333333;--title-h2-color-tks:#ffdd2d}div#p>svg>foreignObject>section #p>svg.bespoke-marp-slide.bespoke-marp-active>foreignObject>section>div>figure{font-family:'Roboto'}div#p>svg>foreignObject>section footer{box-sizing:border-box;font-size:66%;height:60px;line-height:50px;overflow:hidden;padding:10px 25px;position:absolute;left:0;right:0;bottom:0}div#p>svg>foreignObject>section{background-color:var(--bg-color) ;color:#fff!important;font-family:'Roboto';padding:0;font-size:26pt;z-index:0}div#p>svg>foreignObject>section{--marpit-root-font-size:26pt}div#p>svg>foreignObject>section.head_tks{background-color:var(--bg-color-tks) ;background-color:#FFDD2D 
    
    /*
    background-image: url("themes/img/tks-logo.svg"); 

    background-position: 30px 95%;
    background-repeat: no-repeat;
    background-size: auto 7%;
    background-origin: border-box;*/}div#p>svg>foreignObject>section.head2{
     /*
    background-image: url("themes/img/lead/logo.ligth.svg"); 

    background-position: 30px 95%;
    background-repeat: no-repeat;
    background-size: auto 7%;
    background-origin: border-box;
    */}div#p>svg>foreignObject>section h1{font-size:140%;letter-spacing:1.1px;letter-spacing:1.1px;position:relative;height:80px;color:var(--title-h1-color);margin:0;z-index:3;padding:0;padding-left:30px;padding-top:10px}div#p>svg>foreignObject>section a,div#p>svg>foreignObject>section h1 a,div#p>svg>foreignObject>section h2 a{color:white;text-decoration-color:#667EB4}div#p>svg>foreignObject>section code{font-family:'JetBrains Mono',monospace}div#p>svg>foreignObject>section>p>code{word-wrap:anywhere}div#p>svg>foreignObject>section>code,div#p>svg>foreignObject>section>p,div#p>svg>foreignObject>section>pre,div#p>svg>foreignObject>section pre{margin:30px}div#p>svg>foreignObject>section ol,div#p>svg>foreignObject>section ul{margin:26pt}div#p>svg>foreignObject>section table{width:94%;text-align:left;margin:26pt}div#p>svg>foreignObject>section table thead{background:#002882;color:white}div#p>svg>foreignObject>section table tr td,div#p>svg>foreignObject>section table tr th{padding:10px}div#p>svg>foreignObject>section table tr td{border-style:solid;border-color:gray;border-width:1px}div#p>svg>foreignObject>section blockquote{background:linear-gradient(0.25turn,#002882,#33539B00);border-bottom:3px dashed #33539B;border-top:3px dashed #33539B;

    /*font-style: italic;
    line-height: 1.45;
    padding: 10px 15px;*/position:relative;text-align:center}div#p>svg>foreignObject>section blockquote strike{color:#a0a0a0}

/* Styling page number */div#p>svg>foreignObject>section:after{width:calc(121px - 45px);height:40px;z-index:5;padding:0;position:absolute;color:black;background-size:100%;padding-right:45px;padding-top:7px;text-align:right;font-size:66%}div#p>svg>foreignObject>section:after{--marpit-root-font-size:66%}div#p>svg>foreignObject>section li::marker,div#p>svg>foreignObject>section li[data-bespoke-marp-fragment=active]{color:#667EB4}div#p>svg>foreignObject>section.main li::marker{color:#ff9e1f}div#p>svg>foreignObject>section.main li[data-bespoke-marp-fragment=active]{color:#333333}div#p>svg>foreignObject>section.head_tks li::marker,div#p>svg>foreignObject>section.head_tks li[data-bespoke-marp-fragment=active]{color:#7c7c7c}div#p>svg>foreignObject>section li[data-bespoke-marp-fragment=active][data-bespoke-marp-current-fragment]{color:white}div#p>svg>foreignObject>section.compare{background-image:url("themes/img/compare.png")    
    ;padding:0;background-position:0 0;background-repeat:no-repeat;background-size:auto 100%;background-origin:border-box}div#p>svg>foreignObject>section.compare2{background-image:url("themes/img/compare3.png")    
    ;padding:0;background-position:0 0;background-repeat:no-repeat;background-size:auto 100%;background-origin:border-box}div#p>svg>foreignObject>section.compare2:before,div#p>svg>foreignObject>section.compare:before{content:' ';position:absolute;right:100%;top:0;bottom:0;left:638px;width:6px;height:100%;transform:skew(-20deg);overflow:hidden;z-index:0;color:transparent;background:linear-gradient(0.25turn,var(--main-bg-color),var(--main-bg-color),var(--main-bg-color),var(--main-bg-color-tks),var(--main-bg-color-tks),var(--main-bg-color-tks));padding:0;margin:0}div#p>svg>foreignObject>section.compare2 ul,div#p>svg>foreignObject>section.compare ol{position:absolute;top:0;left:0;list-style-type:none;margin:0;padding:0px;width:50%}div#p>svg>foreignObject>section.compare2 ol,div#p>svg>foreignObject>section.compare ul{position:absolute;top:0;left:50%;list-style-type:none;margin:0;padding:0px;width:50%}div#p>svg>foreignObject>section.compare2 li,div#p>svg>foreignObject>section.compare li{margin-top:10px;margin-bottom:10px;padding-top:10px;padding-left:30px;padding-bottom:10px}div#p>svg>foreignObject>section.compare2 ul li,div#p>svg>foreignObject>section.compare ul li{background:linear-gradient(0.25turn,var(--main-bg-color),var(--main-bg-color-half),transparent)}div#p>svg>foreignObject>section.compare2 ol li,div#p>svg>foreignObject>section.compare ol li{background:linear-gradient(0.25turn,var(--main-bg-color-tks),var(--main-bg-color-tks),var(--main-bg-color-half-tks),transparent);background:linear-gradient(0.25turn,white,white,white,white,white,white,transparent);color:black!important}div#p>svg>foreignObject>section em{opacity:0.40;font-style:normal}div#p>svg>foreignObject>section p>strong>em{opacity:1;z-index:1}div#p>svg>foreignObject>section.error p>em>strong:before,div#p>svg>foreignObject>section.error p>strong>em:before,div#p>svg>foreignObject>section.head2 p>em>strong:before,div#p>svg>foreignObject>section.head2 p>strong>em:before,div#p>svg>foreignObject>section.head_tks p>em>strong:before,div#p>svg>foreignObject>section.head_tks p>strong>em:before{content:'';position:absolute;top:0;bottom:0;padding:0;margin:0;width:0;height:0;left:calc(500px - 1px);border-right:270px solid transparent;z-index:2}div#p>svg>foreignObject>section.error p>em>strong:before,div#p>svg>foreignObject>section.error p>strong>em:before,div#p>svg>foreignObject>section.head2 p>em>strong:before,div#p>svg>foreignObject>section.head2 p>strong>em:before{border-top:750px solid var(--bg-color);border-left:0px solid var(--bg-color);width:801px;left:0px;z-index:-1}div#p>svg>foreignObject>section.head_tks p>em>strong:before,div#p>svg>foreignObject>section.head_tks p>strong>em:before{border-top:750px solid var(--bg-color-tks);border-left:0px solid var(--bg-color-tks);width:801px;left:0px;z-index:-1}div#p>svg>foreignObject>section.error p>em>strong:after,div#p>svg>foreignObject>section.error p>strong>em:after,div#p>svg>foreignObject>section.head2 p>em>strong:after,div#p>svg>foreignObject>section.head2 p>strong>em:after,div#p>svg>foreignObject>section.head_tks p>em>strong:after,div#p>svg>foreignObject>section.head_tks p>strong>em:after{content:' ';position:absolute;right:100%;top:0;bottom:0;left:938px;width:6px;height:100%;transform:skew(-20deg);overflow:hidden;z-index:2;padding:0;margin:0}div#p>svg>foreignObject>section.error p>em>strong:after,div#p>svg>foreignObject>section.error p>strong>em:after,div#p>svg>foreignObject>section.head2 p>em>strong:after,div#p>svg>foreignObject>section.head2 p>strong>em:after{background:var(--main-bg-color)}div#p>svg>foreignObject>section.head_tks p>em>strong:after,div#p>svg>foreignObject>section.head_tks p>strong>em:after{background:var(--main-bg-color-tks)}div#p>svg>foreignObject>section.error p>em>strong>img,div#p>svg>foreignObject>section.error p>strong>em>img,div#p>svg>foreignObject>section.head2 p>em>strong>img,div#p>svg>foreignObject>section.head2 p>strong>em>img,div#p>svg>foreignObject>section.head_tks p>em>strong>img,div#p>svg>foreignObject>section.head_tks p>strong>em>img{position:absolute;bottom:0;left:600px;height:100%;z-index:-2;overflow:visible;padding:0;margin:0}div#p>svg>foreignObject>section.head2 h1{background:linear-gradient(0.25turn,var(--bg-color),#05183000)}div#p>svg>foreignObject>section.head_tks h1{background:linear-gradient(0.25turn,var(--bg-color-tks),var(--bg-color-tks),var(--bg-color-tks),var(--bg-color-tks),var(--bg-color-tks),var(--bg-color-tks),#05183000)}div#p>svg>foreignObject>section.error h1{background:linear-gradient(0.25turn,var(--bg-color-error),var(--bg-color-error),var(--bg-color-error),var(--bg-color-error),#05183000)}


/*
Титульная страница
и завершающая страница с контактами
*/

/*
Фоновые изображения, из шаблона ВТБ
*/div#p>svg>foreignObject>section.lead1{background-image:url("themes/img/lead/logo.ligth.svg"),url("img/hb-logo.png"),url("themes/img/lead/lead01.png")}div#p>svg>foreignObject>section.lead2{background-image:url("themes/img/lead/logo.ligth.svg"),url("img/hb-logo.png"),url("themes/img/lead/lead02.jpeg")}div#p>svg>foreignObject>section.lead3{background-image:url("themes/img/lead/lead03.png")}div#p>svg>foreignObject>section.lead4{background-image:url("themes/img/lead/lead04.png")}div#p>svg>foreignObject>section.lead5{background-image:url("themes/img/lead/lead05.jpeg")}div#p>svg>foreignObject>section.lead6{background-image:url("themes/img/lead/logo.ligth.svg"),url("img/hb-logo.png"),url("themes/img/lead/lead06.jpeg")}div#p>svg>foreignObject>section.lead7{background-image:url("themes/img/lead/lead07.jpeg")}div#p>svg>foreignObject>section.lead8{background-image:url("themes/img/lead/lead08.jpeg")}div#p>svg>foreignObject>section.lead9{background-image:url("themes/img/lead/logo.ligth.svg"),url("img/hb-logo.png"),url("themes/img/lead/lead09.jpeg")}div#p>svg>foreignObject>section.lead10{background-image:url("themes/img/lead/logo.ligth.svg"),url("img/hb-logo.png"),url("themes/img/lead/lead10.jpeg")}div#p>svg>foreignObject>section.lead11{background-image:url("themes/img/lead/logo.ligth.svg"),url("img/hb-logo.png"),url("themes/img/lead/lead11.jpeg")}div#p>svg>foreignObject>section.lead12{background-image:url("themes/img/lead/logo.ligth.svg"),url("themes/img/tks-logo.svg"),url("img/hb-logo.png"),url("themes/img/lead/lead12.jpeg")}div#p>svg>foreignObject>section.lead13{background-image:url("themes/img/lead/logo.ligth.svg"),url("img/hb-logo.png"),url("themes/img/lead/lead13.jpeg")}div#p>svg>foreignObject>section.lead14{background-image:url("themes/img/lead/lead14.jpeg")}div#p>svg>foreignObject>section.lead15{background-image:url("themes/img/lead/lead15.png")}div#p>svg>foreignObject>section.lead16{background-image:url("themes/img/lead/lead16.jpeg")}div#p>svg>foreignObject>section.lead17{background-image:url("themes/img/lead/logo.ligth.svg"),url("img/hb-logo.png"),url("themes/img/lead/lead02.jpeg")}div#p>svg>foreignObject>section.lead18{background-image:url("themes/img/lead/logo.ligth.svg"),url("img/hb-logo.png"),url("themes/img/lead/lead18.svg")}div#p>svg>foreignObject>section.lead19{background-image:url("themes/img/lead/lead19.png")}div#p>svg>foreignObject>section.lead20{background-image:url("themes/img/lead/lead20.jpeg")}div#p>svg>foreignObject>section.lead>:first-child{margin-top:0}div#p>svg>foreignObject>section.lead1,div#p>svg>foreignObject>section.lead2,div#p>svg>foreignObject>section.lead5,div#p>svg>foreignObject>section.lead6,div#p>svg>foreignObject>section.lead9,div#p>svg>foreignObject>section.lead10,div#p>svg>foreignObject>section.lead11,div#p>svg>foreignObject>section.lead12,div#p>svg>foreignObject>section.lead13,div#p>svg>foreignObject>section.lead17,div#p>svg>foreignObject>section.lead18{padding:0;background-position:95% 95%,50% 95%,30px 95%,right bottom;background-repeat:no-repeat,no-repeat,no-repeat,no-repeat;background-size:auto 10%,auto 10%,20%,cover;background-origin:padding-box,border-box,border-box,border-box;color:white!important;text-decoration-color:white!important}




/*
Страницы с заголовками тем, вставляются в начале блока по одной теме
*/div#p>svg>foreignObject>section.main{background:#020202;padding:0;background-image:url("img/hb-logo.png") ;background-position:30px 95%;background-repeat:no-repeat;background-size:20%;background-origin:border-box;color:white}div#p>svg>foreignObject>section.main h1{vertical-align:middle;width:75%;top:35%;margin:0;text-align:left;font-size:170%;color:white;background-color:rgba(255,255,255,0.0)}div#p>svg>foreignObject>section.main:before{content:" ";position:absolute;bottom:0;left:940px;width:1400px;height:100%;transform:skew(-20deg);background:#CCD4E6;background:#222222;z-index:-1}div#p>svg>foreignObject>section.lead1 footer a,div#p>svg>foreignObject>section.lead2 footer a,div#p>svg>foreignObject>section.lead5 footer a,div#p>svg>foreignObject>section.lead6 footer a,div#p>svg>foreignObject>section.lead9 footer a,div#p>svg>foreignObject>section.lead10 footer a,div#p>svg>foreignObject>section.lead11 footer a,div#p>svg>foreignObject>section.lead12 footer a,div#p>svg>foreignObject>section.lead13 footer a,div#p>svg>foreignObject>section.lead17 footer a,div#p>svg>foreignObject>section.lead18 footer a{background-color:rgba(0,0,0,0.0);color:white!important;text-decoration-color:white!important}div#p>svg>foreignObject>section.title_tks h1{font-size:140%;letter-spacing:1.1px;position:absolute;width:calc(595px - 30px);height:calc(190px);background:var(--title-h1-color-tks);background-image:url("themes/img/tks2.png");background-position:100% 40%;background-repeat:no-repeat;background-size:350px;background-origin:padding-box;color:#fff;margin:0;z-index:3;padding:0;padding-left:30px;padding-top:10px;top:228px}div#p>svg>foreignObject>section.title_tks h2{font-size:100%;position:absolute;width:calc(595px - 30px);height:65px;background:linear-gradient(0.25turn,var(--title-h2-color-tks),var(--title-h2-color-tks));color:#333333!important;z-index:3;padding:0;margin:0;padding-left:30px;top:425px}div#p>svg>foreignObject>section.title_tks h2 strong{color:#333333;position:absolute;padding-top:10px}div#p>svg>foreignObject>section.lead1 h1,div#p>svg>foreignObject>section.lead2 h1,div#p>svg>foreignObject>section.lead5 h1,div#p>svg>foreignObject>section.lead6 h1,div#p>svg>foreignObject>section.lead9 h1,div#p>svg>foreignObject>section.lead10 h1,div#p>svg>foreignObject>section.lead11 h1,div#p>svg>foreignObject>section.lead12 h1,div#p>svg>foreignObject>section.lead13 h1,div#p>svg>foreignObject>section.lead17 h1,div#p>svg>foreignObject>section.lead18 h1,div#p>svg>foreignObject>section.title h1{font-size:140%;letter-spacing:1.1px;position:absolute;width:calc(595px - 30px);height:calc(190px - 10px);background:var(--title-h1-color);color:#fff;margin:0;z-index:3;padding:0;padding-left:30px;padding-top:10px;line-height:80px;top:228px}div#p>svg>foreignObject>section.lead1 h1:after,div#p>svg>foreignObject>section.lead2 h1:after,div#p>svg>foreignObject>section.lead5 h1:after,div#p>svg>foreignObject>section.lead6 h1:after,div#p>svg>foreignObject>section.lead9 h1:after,div#p>svg>foreignObject>section.lead10 h1:after,div#p>svg>foreignObject>section.lead11 h1:after,div#p>svg>foreignObject>section.lead12 h1:after,div#p>svg>foreignObject>section.lead13 h1:after,div#p>svg>foreignObject>section.lead17 h1:after,div#p>svg>foreignObject>section.lead18 h1:after,div#p>svg>foreignObject>section.title h1:after{content:"";position:absolute;top:0;bottom:0;width:0;height:0;left:calc(595px - 4px);border-top:190px solid var(--title-h1-color);border-right:69px solid transparent;border-left:2px solid var(--title-h1-color)}div#p>svg>foreignObject>section.lead1 h1:before,div#p>svg>foreignObject>section.lead2 h1:before,div#p>svg>foreignObject>section.lead5 h1:before,div#p>svg>foreignObject>section.lead6 h1:before,div#p>svg>foreignObject>section.lead9 h1:before,div#p>svg>foreignObject>section.lead10 h1:before,div#p>svg>foreignObject>section.lead11 h1:before,div#p>svg>foreignObject>section.lead12 h1:before,div#p>svg>foreignObject>section.lead13 h1:before,div#p>svg>foreignObject>section.lead17 h1:before,div#p>svg>foreignObject>section.lead18 h1:before,div#p>svg>foreignObject>section.title h1:before{content:"";position:absolute;right:100%;bottom:0;left:calc(595px + 32px);width:6px;height:190px;transform:skew(-20deg);background:var(--title-h2-color);overflow:hidden;z-index:-1}div#p>svg>foreignObject>section.lead1 h2,div#p>svg>foreignObject>section.lead2 h2,div#p>svg>foreignObject>section.lead5 h2,div#p>svg>foreignObject>section.lead6 h2,div#p>svg>foreignObject>section.lead9 h2,div#p>svg>foreignObject>section.lead10 h2,div#p>svg>foreignObject>section.lead11 h2,div#p>svg>foreignObject>section.lead12 h2,div#p>svg>foreignObject>section.lead13 h2,div#p>svg>foreignObject>section.lead17 h2,div#p>svg>foreignObject>section.lead18 h2,div#p>svg>foreignObject>section.title h2,div#p>svg>foreignObject>section h2{font-size:100%;position:absolute;width:calc(595px - 24px - 30px);height:65px;background:linear-gradient(0.25turn,var(--title-h2-color),var(--title-h2-color));color:white;z-index:3;padding:0;margin:0;padding-left:30px;top:427px}div#p>svg>foreignObject>section.head h2:after,div#p>svg>foreignObject>section.lead1 h2:after,div#p>svg>foreignObject>section.lead2 h2:after,div#p>svg>foreignObject>section.lead5 h2:after,div#p>svg>foreignObject>section.lead6 h2:after,div#p>svg>foreignObject>section.lead9 h2:after,div#p>svg>foreignObject>section.lead10 h2:after,div#p>svg>foreignObject>section.lead11 h2:after,div#p>svg>foreignObject>section.lead12 h2:after,div#p>svg>foreignObject>section.lead13 h2:after,div#p>svg>foreignObject>section.lead17 h2:after,div#p>svg>foreignObject>section.lead18 h2:after,div#p>svg>foreignObject>section.title h2:after{content:"";position:absolute;top:0;bottom:0;width:0;height:0;left:calc(595px - 24px - 4px);border-top:65px solid var(--title-h2-color);border-right:23px solid transparent;border-left:2px solid var(--title-h2-color)}div#p>svg>foreignObject>section.head h2:before,div#p>svg>foreignObject>section.lead1 h2:before,div#p>svg>foreignObject>section.lead2 h2:before,div#p>svg>foreignObject>section.lead5 h2:before,div#p>svg>foreignObject>section.lead6 h2:before,div#p>svg>foreignObject>section.lead9 h2:before,div#p>svg>foreignObject>section.lead10 h2:before,div#p>svg>foreignObject>section.lead11 h2:before,div#p>svg>foreignObject>section.lead12 h2:before,div#p>svg>foreignObject>section.lead13 h2:before,div#p>svg>foreignObject>section.lead17 h2:before,div#p>svg>foreignObject>section.lead18 h2:before,div#p>svg>foreignObject>section.title h2:before{content:"";position:absolute;right:100%;bottom:0;left:calc(595px - 24px + 8px);width:6px;height:65px;transform:skew(-20deg);background:#9BDDFC;overflow:hidden;z-index:-1}div#p>svg>foreignObject>section.error h2 strong,div#p>svg>foreignObject>section.head2 h2 strong,div#p>svg>foreignObject>section.head_tks h2 strong,div#p>svg>foreignObject>section.head h2 strong,div#p>svg>foreignObject>section.lead1 h2 strong,div#p>svg>foreignObject>section.lead2 h2 strong,div#p>svg>foreignObject>section.lead5 h2 strong,div#p>svg>foreignObject>section.lead6 h2 strong,div#p>svg>foreignObject>section.lead9 h2 strong,div#p>svg>foreignObject>section.lead10 h2 strong,div#p>svg>foreignObject>section.lead11 h2 strong,div#p>svg>foreignObject>section.lead12 h2 strong,div#p>svg>foreignObject>section.lead13 h2 strong,div#p>svg>foreignObject>section.lead17 h2 strong,div#p>svg>foreignObject>section.lead18 h2 strong,div#p>svg>foreignObject>section.title h2 strong,div#p>svg>foreignObject>section h2 strong{color:white;position:absolute;padding-top:10px}div#p>svg>foreignObject>section.lead1 h3,div#p>svg>foreignObject>section.lead2 h3,div#p>svg>foreignObject>section.lead5 h3,div#p>svg>foreignObject>section.lead6 h3,div#p>svg>foreignObject>section.lead9 h3,div#p>svg>foreignObject>section.lead10 h3,div#p>svg>foreignObject>section.lead11 h3,div#p>svg>foreignObject>section.lead12 h3,div#p>svg>foreignObject>section.lead13 h3,div#p>svg>foreignObject>section.lead17 h3,div#p>svg>foreignObject>section.lead18 h3,div#p>svg>foreignObject>section h3{font-size:100%;position:absolute;width:calc(455px - 30px);height:calc(190px - 10px);background:#00AAFF;color:white;z-index:3;padding:0;margin:0;padding-left:30px;padding-top:10px;top:calc(427px + 65px + 10px)}div#p>svg>foreignObject>section.lead1 h3:after,div#p>svg>foreignObject>section.lead2 h3:after,div#p>svg>foreignObject>section.lead5 h3:after,div#p>svg>foreignObject>section.lead6 h3:after,div#p>svg>foreignObject>section.lead9 h3:after,div#p>svg>foreignObject>section.lead10 h3:after,div#p>svg>foreignObject>section.lead11 h3:after,div#p>svg>foreignObject>section.lead12 h3:after,div#p>svg>foreignObject>section.lead13 h3:after,div#p>svg>foreignObject>section.lead17 h3:after,div#p>svg>foreignObject>section.lead18 h3:after,div#p>svg>foreignObject>section h3:after{content:"";position:absolute;top:0;bottom:0;width:0;height:0;left:calc(455px - 4px);border-top:190px solid #00AAFF;border-right:69px solid transparent;border-left:2px solid #00AAFF}div#p>svg>foreignObject>section.lead1 h3:before,div#p>svg>foreignObject>section.lead2 h3:before,div#p>svg>foreignObject>section.lead5 h3:before,div#p>svg>foreignObject>section.lead6 h3:before,div#p>svg>foreignObject>section.lead9 h3:before,div#p>svg>foreignObject>section.lead10 h3:before,div#p>svg>foreignObject>section.lead11 h3:before,div#p>svg>foreignObject>section.lead12 h3:before,div#p>svg>foreignObject>section.lead13 h3:before,div#p>svg>foreignObject>section.lead17 h3:before,div#p>svg>foreignObject>section.lead18 h3:before,div#p>svg>foreignObject>section h3:before{content:"";position:absolute;right:100%;bottom:0;left:calc(455px + 32px);width:6px;height:190px;transform:skew(-20deg);background:#9BDDFC;overflow:hidden;z-index:-1}div#p>svg>foreignObject>section.lead1 h3 strong,div#p>svg>foreignObject>section.lead2 h3 strong,div#p>svg>foreignObject>section.lead5 h3 strong,div#p>svg>foreignObject>section.lead6 h3 strong,div#p>svg>foreignObject>section.lead9 h3 strong,div#p>svg>foreignObject>section.lead10 h3 strong,div#p>svg>foreignObject>section.lead11 h3 strong,div#p>svg>foreignObject>section.lead12 h3 strong,div#p>svg>foreignObject>section.lead13 h3 strong,div#p>svg>foreignObject>section.lead17 h3 strong,div#p>svg>foreignObject>section.lead18 h3 strong,div#p>svg>foreignObject>section h3 strong{color:white;position:absolute;padding-top:10px}






/*
section.title::after 
{
    width: calc(121px - 45px);
    height: 40px;
    z-index: 5;
    padding: 0;
    position: absolute;

    color: white;
    background-image: url("themes/img/after.png");
    background-repeat: no-repeat;
    background-origin: initial;
    
    background-size: 100%;
    padding-right: 45px;
    padding-top: 7px;
    text-align: right;
}
*/div#p>svg>foreignObject>section.error h1,div#p>svg>foreignObject>section.head2 h1,div#p>svg>foreignObject>section.head_tks h1,div#p>svg>foreignObject>section.head h1{letter-spacing:1.1px;position:relative;width:calc(1242px - 30px);height:calc(90px - 10px);color:#fff;margin:0;z-index:3;padding:0;padding-left:30px;padding-top:10px;top:0px}div#p>svg>foreignObject>section.head h1{background:var(--bg-color)}div#p>svg>foreignObject>section.head h1:after{content:"";position:absolute;top:0;bottom:0;width:0;height:0;left:calc(1242px - 4px);border-top:90px solid var(--bg-color);border-right:32px solid transparent;border-left:2px solid var(--bg-color)}div#p>svg>foreignObject>section.head h1:before{content:"";position:absolute;right:100%;bottom:0;left:calc(1242px + 14px);width:6px;height:90px;transform:skew(-20deg);background:#00AAFF;overflow:hidden;z-index:-1}div#p>svg>foreignObject>section.error h2,div#p>svg>foreignObject>section.head2 h2,div#p>svg>foreignObject>section.head_tks h2,div#p>svg>foreignObject>section.head h2{position:relative;width:calc(1242px - 25px - 30px);margin-top:10px;top:0px}div#p>svg>foreignObject>section.error h2,div#p>svg>foreignObject>section.head2 h2{background:linear-gradient(0.25turn,var(--title-h1-color),var(--title-h1-color),transparent,transparent)}div#p>svg>foreignObject>section.head_tks h2{background:linear-gradient(0.25turn,var(--main-bg-color-tks),var(--main-bg-color-tks),transparent,transparent);background:linear-gradient(0.25turn,var(--main-bg-color-half-tks),var(--main-bg-color-half-tks),var(--main-bg-color-half-tks),var(--main-bg-color-half-tks),transparent,transparent,transparent);background:linear-gradient(0.25turn,var(--bg-color-tks-half),var(--bg-color-tks-half),var(--bg-color-tks-half),var(--bg-color-tks-half),transparent,transparent,transparent)}div#p>svg>foreignObject>section.head h2:before{left:calc(1242px - 25px + 8px)}div#p>svg>foreignObject>section.head h2:after{left:calc(1242px - 25px - 4px)}div#p>svg>foreignObject>section span.hljs-keyword{color:#00AAFF;font-weight:bold}div#p>svg>foreignObject>section span.hljs-string{color:#BB965A}div#p>svg>foreignObject>section span.hljs-number{color:#CCD4E6}div#p>svg>foreignObject>section.head_tks,div#p>svg>foreignObject>section.head_tks h1,div#p>svg>foreignObject>section.head_tks h2 strong{color:#020202!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]{columns:initial!important;display:block!important;padding:0!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]:after,div#p>svg>foreignObject>section[data-marpit-advanced-background=background]:before,div#p>svg>foreignObject>section[data-marpit-advanced-background=content]:after,div#p>svg>foreignObject>section[data-marpit-advanced-background=content]:before{display:none!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container]{all:initial;display:flex;flex-direction:row;height:100%;overflow:hidden;width:100%}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container][data-marpit-advanced-background-direction=vertical]{flex-direction:column}div#p>svg>foreignObject>section[data-marpit-advanced-background=background][data-marpit-advanced-background-split]>div[data-marpit-advanced-background-container]{width:var(--marpit-advanced-background-split,50%)}div#p>svg>foreignObject>section[data-marpit-advanced-background=background][data-marpit-advanced-background-split=right]>div[data-marpit-advanced-background-container]{margin-left:calc(100% - var(--marpit-advanced-background-split, 50%))}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container]>figure{all:initial;background-position:center;background-repeat:no-repeat;background-size:cover;flex:auto;margin:0}div#p>svg>foreignObject>section[data-marpit-advanced-background=content],div#p>svg>foreignObject>section[data-marpit-advanced-background=pseudo]{background:transparent!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=pseudo],div#p>svg[data-marpit-svg]>foreignObject[data-marpit-advanced-background=pseudo]{pointer-events:none!important}div#p>svg>foreignObject>section[data-marpit-advanced-background-split]{width:100%;height:100%}</style></head><body><div class="bespoke-progress-parent"><div class="bespoke-progress-bar"></div></div><div class="bespoke-marp-osc"><button data-bespoke-marp-osc="prev" tabindex="-1" title="Previous slide">Previous slide</button><span data-bespoke-marp-osc="page"></span><button data-bespoke-marp-osc="next" tabindex="-1" title="Next slide">Next slide</button><button data-bespoke-marp-osc="fullscreen" tabindex="-1" title="Toggle fullscreen (f)">Toggle fullscreen</button><button data-bespoke-marp-osc="presenter" tabindex="-1" title="Open presenter view (p)">Open presenter view</button></div><div id="p"><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-class="lead12" data-theme="vtb_tks" class="lead12" style="--class:lead12;--theme:vtb_tks;">
<h1>Смирнов Вячеслав<br />Рогожников Максим</h1>
<h2><strong>Нагружаем банки</strong></h2>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="2" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>О технологиях и подходах реализации нагрузки в двух разных командах</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-marpit-fragments="14" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="3" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<ul>
<li data-marpit-fragment="1">О нас</li>
<li data-marpit-fragment="2">Планирование</li>
<li data-marpit-fragment="3">Профиль нагрузки</li>
<li data-marpit-fragment="4">Инструменты</li>
<li data-marpit-fragment="5">Тестовый стенд</li>
<li data-marpit-fragment="6">Тестовые данные</li>
<li data-marpit-fragment="7">Тестирование на продуктиве</li>
<li data-marpit-fragment="8">Виды тестов</li>
<li data-marpit-fragment="9">CI/CD для нагрузки</li>
<li data-marpit-fragment="10">Мониторинг</li>
<li data-marpit-fragment="11">Логи</li>
<li data-marpit-fragment="12">Отчеты</li>
<li data-marpit-fragment="13">Кто делает запуски тестов и поддерживает тесты</li>
<li data-marpit-fragment="14">Итоги</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="title" data-theme="vtb_tks" class="title" data-marpit-pagination="4" data-marpit-pagination-total="70" style="--paginate:true;--class:title;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/omsk.jpg&quot;);background-size:cover;"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-class="title" data-theme="vtb_tks" class="title" data-marpit-pagination="4" data-marpit-pagination-total="70" style="--paginate:true;--class:title;--theme:vtb_tks;" data-marpit-advanced-background="content">
<h1>Тестирую и ускоряю ДБО для юридических лиц в банке ВТБ</h1>
<h2><strong>Развиваю <a href="https://t.me/qa_load">@qa_load</a></strong></h2>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="title" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="4" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="title_tks" data-theme="vtb_tks" class="title_tks" data-marpit-pagination="5" data-marpit-pagination-total="70" style="--paginate:true;--class:title_tks;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/Maks.jpg&quot;);background-size:cover;"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-class="title_tks" data-theme="vtb_tks" class="title_tks" data-marpit-pagination="5" data-marpit-pagination-total="70" style="--paginate:true;--class:title_tks;--theme:vtb_tks;" data-marpit-advanced-background="content">
<h1>Тестирую и ускоряю системы в группе компаний Тинькофф</h1>
<h2><strong>Развиваю @qa_load</strong></h2>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="title_tks" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="5" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="6" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Сервисная команда проекта</li>
<li><em>Регулярное НТ основных сервисов</em></li>
<li><em>У команд производительность в приоритете</em></li>
<li><em>Занимаемся профилированием и оптимизацией всех сервисов</em></li>
<li><em>Приоритетно занимаемся вопросами от клиентов</em></li>
</ul>
<ol>
<li>Сервисная команда компании</li>
<li><em>Мы не всегда делаем НТ всего</em></li>
<li><em>Часто нагрузочное тестирование делает команда сама</em></li>
<li><em>Делаем ревью скриптов и результатов</em></li>
<li><em>Приоритетно помогаем бизнес-критичным системам</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="7" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Планирование</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="8" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Канбан</h1>
<h2><strong>Стандартные проекты НТ</strong></h2>
<h2><strong>Поддержка и развитие инфраструктуры</strong></h2>
<h2><strong>Разработка инструментов НТ</strong></h2>
<p>Приоритетное направление</p>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="9" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Скрам</h1>
<h2><strong>Регулярно проводим НТ и замеры</strong></h2>
<h2><strong>Оформляем дефекты и рекомендации</strong></h2>
<h2><strong>Используем упрощенный ЖЦ дефекта</strong></h2>
<p>Команды ускоряют быстрее,<br />
чем мы успеваем проверять<br />
<em>Команда закрывает дефект,<br />
а мы можем переоткрыть</em></p>
<h2><strong>Иногда работаем по двое</strong></h2>
<p><strong><em><img src="img/team.svg" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="10" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/team.svg&quot;);background-size:contain;"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="10" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="content"></section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="head2" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="10" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="11" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Контейнеры на задачи добавляют гибкости</h1>
<h2><strong>Разработка инструментов анализа</strong></h2>
<p>Мониторинг, анализ, отчет</p>
<h2><strong>Поддержка инфраструктуры и стендов</strong></h2>
<h2><strong>Регулярные тесты</strong></h2>
<h2><strong>Профилирование</strong></h2>
<h2><strong>Замеры</strong></h2>
<p><strong><em><img src="img/container.jpg" alt=" opacity:80% " style="filter:opacity(80%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="12" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Скрам</li>
<li>Регулярные тесты</li>
<li><em>Разработка инструментов анализа</em></li>
<li><em>Поддержка стендов</em></li>
<li><em>Профилирование</em></li>
<li><em>Замеры</em></li>
</ul>
<ol>
<li>Канбан</li>
<li>Разработка инструментов НТ</li>
<li><em>Поддержка инфраструктуры</em></li>
<li><em>Стандартные проекты НТ</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="13" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Профиль нагрузки</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="14" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Прогноз профиля, на основе таблиц БД</h1>
<h2><strong>Состав операций с легаси</strong></h2>
<p>Но с учетом новых операций</p>
<h2><strong>Интенсивность с легаси</strong></h2>
<p>Но с учетом прогноза роста</p>
<h2><strong>SLA для текущей системы</strong></h2>
<p>Согласован с экспертами</p>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:20%  " style="filter:opacity(20%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="15" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Автосбор профиля по RED либо по логам</h1>
<h2><strong>Соответствие профиля продуктиву</strong></h2>
<p>Минимум на 95%</p>
<h2><strong>Соответствие интенсивности продуктиву</strong></h2>
<p>На 100%</p>
<h2><strong>Требуем от команд SLA и NFR</strong></h2>
<p>Без этого не начинаем</p>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="16" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>nfr.yml обязателен для НТ</h1>
<p><strong><em><img src="img/nfr.2.png" alt="  " /></em></strong></p>
<h2><strong>Требования <em>(проверяемые):</em></strong></h2>
<ul>
<li>99, 95, 75, 50 перцентили</li>
<li>Максимальное время</li>
<li>Процент ошибок</li>
</ul>
<p>Время в миллисекундах</p>
<h2><strong>Для <em>теста, запросов или групп:</em></strong></h2>
<ul>
<li><code>all</code></li>
<li><code>http(&quot;GET /&quot;)</code></li>
<li><code>group(&quot;myGroup&quot;){}</code></li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="17" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/nfr.2.png&quot;);background-size:cover;"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="17" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="17" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;" data-marpit-advanced-background="content"></section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="head_tks" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="17" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="18" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="18" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Прогноз профиля нагрузки</li>
<li>Источник профиля: база данных</li>
<li><em>SLA по времени отклика утвержден</em></li>
</ul>
<ol>
<li>Автосбор профиля</li>
<li>Источник профиля: логи и ELK</li>
<li><em>Требуем от команд SLA</em></li>
<li><em>RED: (Request) Rate, Errors, Duration</em></li>
<li><em>Источник RED: Prometheus + ELK</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="19" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="19" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Инструменты</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="20" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="20" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Используем браузер, JVM-профайлер и JMeter</h1>
<h2><strong>Работа по инцидентам: Skype + коллега</strong></h2>
<p>Самые горячие проблемы</p>
<h2><strong>Firefox/Chrome, Fiddler, JVM-профайлер</strong></h2>
<p>Для проработки узких мест</p>
<h2><strong>Регулярные тесты: Apache.JMeter</strong></h2>
<p>Для регресса</p>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="head2" data-footer="Источник фото: https://habr.com/ru/article/508466/" data-theme="vtb_tks" class="head2" data-marpit-pagination="21" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--footer:Источник фото: https://habr.com/ru/article/508466/;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/show-me-bug.jpg&quot;);filter:opacity(100%);"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="21" data-paginate="true" data-class="head2" data-footer="Источник фото: https://habr.com/ru/article/508466/" data-theme="vtb_tks" class="head2" data-marpit-pagination="21" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--footer:Источник фото: https://habr.com/ru/article/508466/;--theme:vtb_tks;" data-marpit-advanced-background="content">
<h1>Для работы по инцидентам: Skype + коллега</h1>
<footer>Источник фото: <a href="https://habr.com/ru/article/508466/">https://habr.com/ru/article/508466/</a></footer>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="head2" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="21" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="22" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/vtbbo.ru.png&quot;);"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="22" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="22" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="content">
<h1>Для замеров: Firefox или Chrome</h1>
<h2><strong>Developer Tools / Network</strong></h2>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="head2" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="22" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="23" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/vtbbo.ru.1.png&quot;);"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="23" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="23" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="content">
<h1>Анализируем запросы к бекенду</h1>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="head2" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="23" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="24" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="24" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Gatling + свои плагины <em>(Scala)</em>, k6 <em>(JS)</em></h1>
<h2><strong>Единообразный процесс запуска НТ</strong></h2>
<h2><strong>Вне зависимости от инструмента</strong></h2>
<h2><strong>Не важно, что генерирует нагрузку</strong></h2>
<p>Вы всегда получите<br />
один и тот же результат<br />
и набор графиков</p>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="25" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="25" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Инструменты удобные инженеру НТ</li>
<li>Много профилирования и замеров</li>
<li><em>Maven, JMeter Maven Plugin, JMeter</em></li>
<li><em>Perfomance Center, Gatling</em></li>
<li><em>Профиль нагрузки и SLA задается в property-файле</em></li>
</ul>
<ol>
<li>Инструменты удобные разработчику</li>
<li>Единообразный процесс запуска НТ</li>
<li><em>Gatling (Scala) для бекендеров</em></li>
<li><em>k6 (JS и GoLang) для фронтендеров</em></li>
<li><em>Профиль нагрузки и SLA задается в yaml-файле</em></li>
<li><em>Свои плагины для Gatling</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="26" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="26" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Тестовый стенд</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="27" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="27" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Фиксированные стенды, одно плечо продуктива</h1>
<h2><strong>Три нагрузочных стенда</strong></h2>
<p>Железо есть<br />
Больше, чем на проде</p>
<h2><strong>Поддержка на нас</strong></h2>
<p>У нас есть 4 стенда<br />
Полноценных стенда<br />
Справляемся с тремя</p>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="28" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="28" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Отдельные NS в k8s или переиспользуем стенд</h1>
<h2><strong>Системы объединены по направлению</strong></h2>
<p>И у них должны быть<br />
одинаковые потребности<br />
по ресурсам</p>
<h2><strong>Стараемся делать 1 плечо прода</strong></h2>
<p>1 датацентр либо<br />
1 плечо нагрузки</p>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="29" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="29" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Стенды на железных серверах</li>
<li>Стационарные стенды</li>
<li>Стационарные тестовые базы</li>
<li><em>Хорошие стенды, 1 плечо прода</em></li>
<li><em>Kubernetes</em></li>
<li><em>Поддерживаем стенды сами</em></li>
<li><em>Jenkins, TeamCity, helm, kubectl</em></li>
</ul>
<ol>
<li>Стенды в облачной инфраструктуре</li>
<li>Переиспользуемые стенды</li>
<li>Проливка обезличенных данных</li>
<li><em>Хорошие стенды, 1 плечо прода</em></li>
<li><em>Kubernetes</em></li>
<li><em>Стенды поддерживают команды</em></li>
<li><em>Ansible, Terraform, Packer, Gitlab-CI и helm или kustomize чарты</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="30" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="30" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Тестовые данные</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="31" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="31" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Сгенерированные во время тестирования данные</h1>
<h2><strong>Базы больше, чем на проде</strong></h2>
<h2><strong>Минусы</strong></h2>
<p>Диски заканчиваются</p>
<h2><strong>Плюсы</strong></h2>
<p>Запросы завтрашнего дня<br />
Медленные SQL-запросы</p>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="32" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="32" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Клон БД с прода с обфусцированные данными</h1>
<h2><strong>Сбор и обезличивание снимков прода</strong></h2>
<h2><strong>Или сгенерированные данные</strong></h2>
<p>Используем генераторы ФТ и АТы</p>
<h2><strong>Плюсы</strong></h2>
<p>Данные, как на проде<br />
По количеству и<br />
распределению</p>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="33" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="33" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Данных больше, чем на продуктиве</li>
<li>Данные, как результат сотен запусков тестов НТ</li>
</ul>
<ol>
<li>Данные, как на продуктиве</li>
<li>Генерируемые синтетические данные, генераторами ФТ и АТ</li>
<li>Проливка обезличенных данных с продуктива</li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="34" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="34" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Тестирование на продуктиве</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="35" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="35" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Тестируем на проде то, что не списывает деньги</h1>
<h2><strong>Нагрузка живым трафиком: 25%, 60%, 100%</strong></h2>
<p>Настройкой балансера</p>
<h2><strong>Нагрузка синтетическими запросами</strong></h2>
<p>Выведя ноду из ротации</p>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="36" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="36" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Нагрузка на прод отключается, если что-то не так</h1>
<h2><strong>При превышении SLA</strong></h2>
<h2><strong>1. Утилизация</strong></h2>
<h2><strong>2. Время отклика</strong></h2>
<h2><strong>3. APDEX</strong></h2>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="37" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="37" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Не тестируем на продуктиве</h1>
<h2><strong>Делаем анализ SQL-запросов с прода</strong></h2>
<p>Регулярно</p>
<h2><strong>Делаем профилирование JVM</strong></h2>
<p>Очень редко</p>
<h2><strong>Разбираем инциденты</strong></h2>
<p>Ручные замеры</p>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="38" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="38" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Не тестируем на продуктиве, наблюдаем, созерцаем</li>
<li><em>Анализируем pg_stat_statements</em></li>
</ul>
<ol>
<li>Тестируем сервисы, которые не списывают деньги</li>
<li>Перенастройкой балансировщика</li>
<li>Синтетическим трафиком на выведенную из балансировки ноду</li>
<li><em>Прекращаем при превышении SLA: утилизация, время отклика, APDEX</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="39" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="39" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Виды тестов</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="40" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="40" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Интеграционные тесты MaxPerf и замеры</h1>
<h2><strong>Регулярные тесты — MaxPerf <em>(поиск максимальной интенсивности)</em></strong></h2>
<p>На продуктивных версиях</p>
<h2><strong>Замеры на разных версиях системы <em>каждый день</em></strong></h2>
<p>Chrome, Fiddler, Java-profiler</p>
<h2><strong>Подробный разбор результатов <em>каждого теста</em></strong></h2>
<p>Оформление рекомендаций</p>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="41" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="41" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Виды НТ по уровням зрелости команд</h1>
<h2><strong>Debug/Smoke и MaxPerf с подтверждением</strong></h2>
<h2><strong><em>1.</em> Тесты без интеграции, бенчмарки:</strong></h2>
<p>MaxPerf с подтверждением</p>
<h2><strong><em>2.</em> Тесты с интеграцией:</strong></h2>
<p>MaxPerf с подтверждением</p>
<h2><strong><em>3.</em> Объёмное, повторение дефектов продуктива</strong></h2>
<h2><strong><em>4.</em> Chaos Testing, стресс тестирование</strong></h2>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="42" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="42" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Ориентация на ускорение</li>
<li>НТ ради рекомендаций и дефектов</li>
<li><em>Непрерывные замеры и оптимизации</em></li>
<li><em>Еженедельный MaxPerf на продуктивной версии системы</em></li>
<li><em>Всегда объемное тестирование</em></li>
<li><em>Масштабирумости</em></li>
</ul>
<ol>
<li>Ориентация на покрытие</li>
<li>Виды НТ по уровням зрелости</li>
<li><em>Debug (Smoke) и MaxPerf с подтверждением</em></li>
<li><em>Бечмарки (на один сервис)</em></li>
<li><em>Тесты с интеграцией</em></li>
<li><em>Chaos Testing</em></li>
<li><em>Объёмное</em></li>
<li><em>Стресс тестирование</em></li>
<li><em>Масштабируемости</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="43" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="43" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>CI/CD для нагрузки</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="44" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="44" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Jenkins, Nexus, Maven, <em>Python, Bash, Java</em></h1>
<h2><strong>Распределенные тесты из своего Jenkins <em>, используя общие Nexus, Git</em></strong></h2>
<h2><strong>Свои генераторы нагрузки <em>на железе, не в Kubernetes</em></strong></h2>
<h2><strong>Запуск тестов с Maven <em>и JMeter Maven Plugin</em></strong></h2>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="45" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="45" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1><em>Jenkins, Nexus, Maven,</em> Python, Bash, Java</h1>
<h2><strong><em>Распределенные тесты из своего Jenkins , используя общие Nexus, Git</em></strong></h2>
<h2><strong><em>Свои генераторы нагрузки на железе, не в Kubernetes</em></strong></h2>
<h2><strong><em>Запуск тестов с Maven и JMeter Maven Plugin</em></strong></h2>
<h2><strong>Анализ результатов тестов на соответствие SLA <em>на Python</em></strong></h2>
<h2><strong>Сравнение конфигураций и версий на стендах <em>на Python</em></strong></h2>
<h2><strong>Сохранение снимков Grafana по тестам <em>на Java и Selenium</em></strong></h2>
<h2><strong>Автоматизация профилирования JVM <em>на Bash c kubectl</em></strong></h2>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="46" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="46" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Gitlab-CI, Nexus, Docker</h1>
<h2><strong>Gitlab-CI</strong></h2>
<p>Pipeline в Gitlab-CI <em>похож на<br />
Docker-Compose + Jenkins</em></p>
<h2><strong>Все в одном месте, стандартизируется</strong></h2>
<h2><strong>и переиспользуется</strong></h2>
<p>За счет Gitlib-CI и Docker</p>
<h2><strong>Генераторы под каждый вид НТ</strong></h2>
<p>Настроенные для НТ</p>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="47" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="47" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Jenkins</li>
<li>Запуск тестов с JMeter Maven Plugin</li>
<li>Выделенные генераторы под проект</li>
<li><em>Инфраструктура нагрузки на периодических задачах Jenkins</em></li>
</ul>
<ol>
<li>Gitlab-CI</li>
<li>Запуск тестов из Docker-контейнеров</li>
<li>Общие генераторы для всех</li>
<li><em>Генераторы нагрузки под каждый вид тестов, настроенные для НТ</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="48" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="48" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Мониторинг</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="49" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="49" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>VictoriaMetrics, InfluxDB (1.8), Grafana</h1>
<h2><strong>VictoriaMetrics <em>заменила Prometheus</em></strong></h2>
<h2><strong>InfluxDB <em>для «выгружалок» и тестов</em></strong></h2>
<h2><strong>Следим за новинками Grafana</strong></h2>
<h2><strong>Детальный мониторинг всего</strong></h2>
<p><em>на поддержке команды НТ</em></p>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="50" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="50" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Prometheus + Grafana</h1>
<h2><strong>Prometheus + VictoriaMetrics</strong></h2>
<p>Для метрик мониторинга</p>
<p>Стандарт де-факто<br />
в нашей отрасти</p>
<h2><strong>InfluxDB</strong></h2>
<p>Для метрик Gatling и k6</p>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="51" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="51" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>VictoriaMetrics вместо Prometheus</li>
<li>Grafana</li>
<li>Мониторинг на нашей поддержке</li>
<li><em>InfluxDB для всего остального</em></li>
</ul>
<ol>
<li>Prometheus вместе с VictoriaMetrics</li>
<li>Grafana</li>
<li>Мониторинг на поддержке команд</li>
<li><em>InfluxDB для метрик Gatling и k6</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="52" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="52" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Логи</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="53" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="53" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Единый logback.xml, Fluentd, ElasticSearch</h1>
<h2><strong>Единый формат логов для всех сервисов</strong></h2>
<p>Переопределен logback.xml</p>
<h2><strong>Fluentd парсит строки логов на поля</strong></h2>
<h2><strong>Маскирование для Message на JRuby</strong></h2>
<p>User TestUser* timeout *sec</p>
<h2><strong>ElasticSearch хранит логи и поля</strong></h2>
<p>4 дня<br />
<strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="54" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/errors.png&quot;);"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="54" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="54" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="content">
<h1>Группировка логов по текстам сообщений</h1>
<h2><strong>Это ускоряет анализ прооблем на порядок</strong></h2>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="head2" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="54" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="55" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="55" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Внутреняя разработка на основе ELK</h1>
<h2><strong>Выгрузка всех логов приложений</strong></h2>
<h2><strong>Поиск проблем по логам</strong></h2>
<h2><strong>Аллертинг на основе логов</strong></h2>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="56" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="56" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>ElasticSearch, fluentd, logback.xml</li>
<li><em>Группировка по маскированным текстам сообщений</em></li>
</ul>
<ol>
<li>Разработка на базе ELK</li>
<li><em>Аллертинг на основе логов и полнотекстовый поиск по ним</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="57" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="57" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Отчеты</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="58" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="58" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Снимки Grafana и карточки страниц в Confluence</h1>
<h2><strong>Python-скрипт анализирует результаты <em>JMeter-тестов из InfluxDB</em></strong></h2>
<h2><strong>Используем снимки Grafana <em>для долговременного хранения метрик</em></strong></h2>
<p>Grafana с PostgreSQL Storage<br />
А снимки делает Selenium</p>
<h2><strong>Результаты регулярных тестов в карточках страниц Confluence</strong></h2>
<p>В карточке дата и итог теста<br />
На странице ставится тег НТ<br />
Ссылки на снимки Grafana<br />
<em>+ добавляется любой текст</em><br />
Confluence строит сводку</p>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="59" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/annotation.png&quot;);"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="59" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="59" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="content">
<h1>Автоматически ставятся аннотации OK/KO</h1>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="head2" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="59" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="60" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/snapshot.png&quot;);"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="60" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="60" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;" data-marpit-advanced-background="content">
<h1>Ссылки на снимки в Confluence</h1>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="head2" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="60" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="61" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="61" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Не пишем отчеты, используем «Cosmos»</h1>
<h2><strong>Все логи в едином хранилище <em>: разработка на ELK</em></strong></h2>
<h2><strong>Все метрики в едином хранилище <em>: Prometheus</em></strong></h2>
<h2><strong>Результаты НТ в едином хранилище <em>: InfluxDB</em></strong></h2>
<h2><strong>Все требования SLA и NFR в GIT <em>: в nfr.yml</em></strong></h2>
<p>Есть всё для отчета</p>
<h2><strong>Портал НТ «Cosmos» <em>(внутренняя разработка)</em></strong></h2>
<ul>
<li>строит отчеты сам</li>
<li>сравнивает результаты</li>
</ul>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="62" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;" data-marpit-advanced-background="background"><div data-marpit-advanced-background-container="true" data-marpit-advanced-background-direction="horizontal"><figure style="background-image:url(&quot;img/%D1%81osmos.png&quot;);"></figure></div></section></foreignObject><foreignObject width="1280" height="720"><section id="62" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="62" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;" data-marpit-advanced-background="content">
<h1>Портал НТ «Cosmos»</h1>
</section>
</foreignObject><foreignObject width="1280" height="720" data-marpit-advanced-background="pseudo"><section class="head_tks" style="" data-marpit-advanced-background="pseudo" data-marpit-pagination="62" data-marpit-pagination-total="70"></section></foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="63" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="63" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Заполняем карточку отчета</li>
<li><em>Разработка на Python ставит Grafana Annotation на основе SLA из json</em></li>
<li><em>Снимки Grafana собираются автоматически и содержат всё</em></li>
<li><em>Confluence собирает отчеты по карточкам страниц с тегом НТ</em></li>
</ul>
<ol>
<li>Не пишем отчеты вообще</li>
<li><em>Требований ко всем сервисам описаны в едином виде в nfr.yml</em></li>
<li><em>Единые хранилища содержат все метрики, логи и результаты</em></li>
<li><em>Портал НТ «Cosmos» собирает отчет автоматически</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="64" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="64" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Кто делает запуски тестов и поддерживает тесты</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="65" data-paginate="true" data-class="head2" data-theme="vtb_tks" class="head2" data-marpit-pagination="65" data-marpit-pagination-total="70" style="--paginate:true;--class:head2;--theme:vtb_tks;">
<h1>Запускаем и поддерживаем тесты сами</h1>
<h2><strong><em>Поддерживаем стенды с интеграциями</em></strong></h2>
<h2><strong><em>Поддерживаем мониторинг</em></strong></h2>
<h2><strong>Поддерживаем и запускаем тесты</strong></h2>
<p><em>Не делаем ревью тестов</em></p>
<h2><strong>Оформляем дефекты</strong></h2>
<h2><strong>И рекомендации</strong></h2>
<p><strong><em><img src="themes/img/lead/lead04.png" alt=" opacity:40%  " style="filter:opacity(40%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="66" data-paginate="true" data-class="head_tks" data-theme="vtb_tks" class="head_tks" data-marpit-pagination="66" data-marpit-pagination-total="70" style="--paginate:true;--class:head_tks;--theme:vtb_tks;">
<h1>Поддержка НТ на командах без нагрузочников</h1>
<h2><strong>Запускаем лишь базовые тесты</strong></h2>
<p><em>если сами их писали</em></p>
<h2><strong>Консультируем по любому вопросу</strong></h2>
<p><em>Команда тестирует сама</em></p>
<h2><strong>Поддержка тестов на команде</strong></h2>
<h2><strong>Команда НТ делает ревью кода</strong></h2>
<p><em>Все тесты, как код, в Git<br />
Команда НТ делает Approve</em></p>
<p><strong><em><img src="themes/img/tks.png" alt=" opacity:100% " style="filter:opacity(100%);" /></em></strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="67" data-paginate="true" data-class="compare2" data-theme="vtb_tks" class="compare2" data-marpit-pagination="67" data-marpit-pagination-total="70" style="--paginate:true;--class:compare2;--theme:vtb_tks;">
<ul>
<li>Запускаем и поддерживаем тесты</li>
<li><em>Рекомендуем оптимизации</em></li>
<li><em>Не делаем ревью скриптов JMeter</em></li>
<li><em>Тесты выполняются нами после релиза, каждый спринт</em></li>
</ul>
<ol>
<li>Помогаем начать НТ в команде</li>
<li><em>Консультируем по всем вопросам</em></li>
<li><em>Делаем ревью кода тестов</em></li>
<li><em>Команда сама поддерживает и запускает тесты перед релизом</em></li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="68" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="68" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<h1>Итоги</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="69" data-paginate="true" data-class="main" data-theme="vtb_tks" class="main" data-marpit-pagination="69" data-marpit-pagination-total="70" style="--paginate:true;--class:main;--theme:vtb_tks;">
<ul>
<li>О докладчиках <em>: сервисная команда проекта или всей компании</em></li>
<li>Планирование <em>: скрам или канбан</em></li>
<li>Профиль нагрузки <em>: профиль из базы данных или из ELK с NFR из yml</em></li>
<li>Инструменты <em>: JMeter или Gatling+k6</em></li>
<li>Тестовый стенд <em>: prod-like железный стационарный или виртуальный</em></li>
<li>Тестовые данные <em>: от нагрузки или генерируемые/анонимизируемые</em></li>
<li>Тестирование на продуктиве <em>: нет или живым трафиком с тестами</em></li>
<li>Виды тестов <em>: ориентация на дефекты или на покрытие</em></li>
<li>CI/CD для нагрузки <em>: Jenkins+Maven или Gitlab-CI+Docker с генераторов</em></li>
<li>Мониторинг <em>: Prometheus и/или VictoriaMetrics, InfluxDB, Grafana</em></li>
<li>Логи <em>: ElasticSearch и подготовка данных для него</em></li>
<li>Отчеты <em>: InfluxDB+Grafana+Confluence или портал НТ «Cosmos»</em></li>
<li>Кто делает запуски тестов и поддерживает тесты <em>: сами или команды, в которых нет нагрузочников, но есть разработчики и тестировщики</em></li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="70" data-paginate="true" data-class="lead12" data-theme="vtb_tks" class="lead12" data-marpit-pagination="70" data-marpit-pagination-total="70" style="--paginate:true;--class:lead12;--theme:vtb_tks;">
<h1>Вопросы/ответы<br /> Нагружаем банки</h1>
<h2><strong>Вячеслав, Максим, <a href="https://t.me/qa_load">@qa_load</a></strong></h2>
</section>
<script>!function(){"use strict";const t="marpitSVGPolyfill:setZoomFactor,",e=Symbol();let r,o;function n(n){const i="object"==typeof n&&n.target||document,a="object"==typeof n?n.zoom:n;window[e]||(Object.defineProperty(window,e,{configurable:!0,value:!0}),window.addEventListener("message",(({data:e,origin:r})=>{if(r===window.origin)try{if(e&&"string"==typeof e&&e.startsWith(t)){const[,t]=e.split(","),r=Number.parseFloat(t);Number.isNaN(r)||(o=r)}}catch(t){console.error(t)}})));let l=!1;Array.from(i.querySelectorAll("svg[data-marpit-svg]"),(t=>{var e,n,i,s;t.style.transform||(t.style.transform="translateZ(0)");const c=a||o||t.currentScale||1;r!==c&&(r=c,l=c);const d=t.getBoundingClientRect(),{length:u}=t.children;for(let r=0;r<u;r+=1){const o=t.children[r],a=o.getScreenCTM();if(a){const t=null!==(n=null===(e=o.x)||void 0===e?void 0:e.baseVal.value)&&void 0!==n?n:0,r=null!==(s=null===(i=o.y)||void 0===i?void 0:i.baseVal.value)&&void 0!==s?s:0,l=o.firstElementChild,{style:u}=l;u.transformOrigin||(u.transformOrigin=`${-t}px ${-r}px`),u.transform=`scale(${c}) matrix(${a.a}, ${a.b}, ${a.c}, ${a.d}, ${a.e-d.left}, ${a.f-d.top}) translateZ(0.0001px)`}}})),!1!==l&&Array.from(i.querySelectorAll("iframe"),(({contentWindow:e})=>{null==e||e.postMessage(`${t}${l}`,"null"===window.origin?"*":window.origin)}))}r=1,o=void 0;const i=(t,e,r)=>{if(t.getAttribute(e)!==r)return t.setAttribute(e,r),!0};function a({once:t=!1,target:e=document}={}){const r="Apple Computer, Inc."===navigator.vendor?[n]:[];let o=!t;const a=()=>{for(const t of r)t({target:e});!function(t=document){Array.from(t.querySelectorAll('svg[data-marp-fitting="svg"]'),(t=>{var e;const r=t.firstChild,o=r.firstChild,{scrollWidth:n,scrollHeight:a}=o;let l,s=1;if(t.hasAttribute("data-marp-fitting-code")&&(l=null===(e=t.parentElement)||void 0===e?void 0:e.parentElement),t.hasAttribute("data-marp-fitting-math")&&(l=t.parentElement),l){const t=getComputedStyle(l),e=Math.ceil(l.clientWidth-parseFloat(t.paddingLeft||"0")-parseFloat(t.paddingRight||"0"));e&&(s=e)}const c=Math.max(n,s),d=Math.max(a,1),u=`0 0 ${c} ${d}`;i(r,"width",`${c}`),i(r,"height",`${d}`),i(t,"preserveAspectRatio",getComputedStyle(t).getPropertyValue("--preserve-aspect-ratio")||"xMinYMin meet"),i(t,"viewBox",u)&&t.classList.toggle("__reflow__")}))}(e),o&&window.requestAnimationFrame(a)};return a(),()=>{o=!1}}const l=Symbol(),s=document.currentScript;((t=document)=>{if("undefined"==typeof window)throw new Error("Marp Core's browser script is valid only in browser context.");if(t[l])return t[l];const e=a({target:t}),r=()=>{e(),delete t[l]};Object.defineProperty(t,l,{configurable:!0,value:r})})(s?s.getRootNode():document)}();
</script></foreignObject></svg></div><div class="bespoke-marp-note" data-index="0" tabindex="0"><p></p></div><div class="bespoke-marp-note" data-index="3" tabindex="0"><p>Повышаю качество более десяти лет. Занимаюсь системой дистанционного банковского обслуживания юридических лиц. Основной профиль моей работы — тестирование производительности. Развиваю сообщество инженеров по тестированию производительности, помогая коллегам в telegram чате «QA — Load &amp; Performance».

Занимаюсь оформлением дефектов и предварительными действиями для этого: профилированием JVM, оптимизаций SQL-запросов, разработкой досок в Grafana, группировкой логов в Kibana. Автоматизирую все, что сделал несколько раз.
Давно не писал скрипты, но поддерживаю навык за счет ответов на вопросы коллег.
Работаю в продуктовой команде. Но у нас в системе более 400-т сервисов. Из-за большого количества сервисов на поддержке наша продуктовая команда - сервисная, с большим беклогом, когда все надо сделать вчера</p></div><div class="bespoke-marp-note" data-index="4" tabindex="0"><p>Я к сожалению или к счастью не занимаюсь заведением дефектов. Да, раньше я это тоже делал, но сейчас у нас чуть другой подход к НТ, я говорю у нас т.к. сложно делать НТ для ГК Тинькофф в одного, когда у тебя каждый день 100 релизов разных приложений как монолитных так и микросервисных. Поэтому мой подход заключается в том, чтобы дать инструменты командам, которые сами все сделают. Про это я и поведаю вам далее.</p></div><div class="bespoke-marp-note" data-index="5" tabindex="0"><p># В чем отличия

Максим: Кто отвечает за НТ в принципе и какая у нас роль. Мы не всегда делаем НТ всего. Часто НТ делает команда сама, а мы лишь делаем ревью скриптов и их результаты. Да, у нас есть бизнес-линии как мы это называем или продукты например инвестиции, финансовые системы и т.д. на бизнес-критичных системах мы безусловно обращаем большее вниманием и помогаем им в приоритетном порядке.

Слава: У нас есть разделение на сервисы платформы и прикладные сервисы. Сервисы платформы наиболее нагруженные, делаем НТ сами. И помогаем командам с профилированием, пишем для команд дефекты, в которых указано в какой строке кода сервис тормозит.

# Что общего
Работаем  IT-компаниях, предоставляющие банковские услуги. Где пишут и оптимизируют свой же код. Работаем в командах нагрузки, в которых сосредоточена экспертиза по тестированию производительности. В сравнимых условиях и сравнимых командах, но очень разных.</p></div><div class="bespoke-marp-note" data-index="7" tabindex="0"><p>Максим: у нас канбан. Мы работаем как сервисная команда и как я говорил ранее кроме проектов НТ у нас есть свои проекты по разработке инструментов НТ и поддержки инфраструктуры вокруг них. По этому наши задачи разделены на 3 больших блока: стандартные проекты НТ, поддержка и развитие инфраструктуры и собственно разработка инструментов НТ. Приоритет у нас больше смещен в пользу последнего.</p></div><div class="bespoke-marp-note" data-index="8" tabindex="0"><p>Слава: у нас тоже был канбан, вытягивали. Теперь скрам - планируем. Но планируем с фактором неопределенности.

Заводим много дефектов и задач в беклоги других команд, и они возвращаются на нас с некотроллируемой скоростью, как срочные задачи, которые надо проверить в ближайшее время.

Стенда три, а инженеров больше 6-ти, и мы часто работаем по двое. Это увеличивает оценку задач.

Поэтому используем контейнеры на задачи, чтобы погасить фактор неопределенности. Например, 3 дня мы будем оптимизировать SQL-запросы. А какие именно, кто именно, пока не знаем.</p></div><div class="bespoke-marp-note" data-index="13" tabindex="0"><p>Слава: Пропорции продуктива с более высокой интенсивностью
На продуктиве есть механизм КПЭ (контрольных показателей эффективности), внутренняя аналитика. На ее основе строится соотношения в профиле нагрузки. Если известно, что карточка документа открывалась за неделю 10 000 раз, а сохранялась 9 000 раз, то мы знаем, что только 90% открытий приводит к сохранениям и учитываем пропорцию в профиле. А интенсивность увеличиваем до отказа, зная, что прошли 1 продуктив, 2 продуктива, ... 20 продуктивов.

Профиль получить и реализовать в скриптах несложно. Сложно получить и согласовать SLA. В качестве SLA используются продуктивные метрики КПЭ.</p></div><div class="bespoke-marp-note" data-index="26" tabindex="0"><p>Слава: Фиксированные стенды, одно плечо продуктива
На стенды нагрузки выделено ресурсов столько же, сколько на продуктив. Но на продуктиве распределенный кластер на два плеча. А для нагрузки два отдельных стенда. 
Это позволяет проводить тестирование параллельно и на нагрузке выше продуктива.

Для локализации дефектов и проверки исправлений по ним используются третий небольшой стенды.</p></div><div class="bespoke-marp-note" data-index="27" tabindex="0"><p>Максим: чаще используем отдельные NS  в кубе или же контур в облаке openstack. Либо 1 стенд на несколько систем т.е. в 1 момент времени там залита лишь 1 система, а в другой другая. Системы объединены по направлению какому-то и у них должны быть одинаковые потребности по ресурсам. Стараемся делать 1 плечо прода - 1 датацентр либо 1 плечо нагрузки если есть балансер до. Почему так, у нас очень много систем и мы быстро растем и держать контур лайк-прод нам не очень удобно.</p></div><div class="bespoke-marp-note" data-index="28" tabindex="0"><p>Что общего
Тестовые стенды у нас хорошие. В банках редко бывают плохие тестовые стенды.

В чем отличия

Слава: Почему стенды фиксированные - тестовые данные очень сложно сохранить и восстановить, их слишком много. Даже если восстановить все БД полугодовой давности, то накат миграций на террабайтные базы данных будет длиться вечно. Поэтому миграции на базы данных накатываются регулярно и не откатываются, и стенды привязаны к базам данных.

Максим: Ansible, Terraform, Packer, Gitlab-CI и helm или kustomize чарты позволяют создать кластер на лету. Также у нас автоматизирован сбор снимков с продуктива и их обезличивание.

Получается:
фиксированные БД == фиксированные стенды
создаваемые по запросу БД == создаваемые по запросу стенды
И тестовые данные играют ключевую роль</p></div><div class="bespoke-marp-note" data-index="30" tabindex="0"><p>Слава: Сгенерированные во время тестирования
Хорошо бы тестировать на реальных данных, но это невозможно. Доступа до них просто нет. И чтобы знать производительность завтрашнего дня, надо иметь больше данных, чем на проде.

За счёт регулярных запусков тестов на стенде НТ много данных. И дисковое пространство наш самый критичный ресурс. 

Плюсы - есть возможность находить узкие места, раньше, чем на продуктиве. 
Минусы - можно услышать в ответ на дефект, что на продуктиве все быстро, хотя версия та же.

Фишка - данные не такие как на продуктиве. Их больше. И они не сентетические, они как настоящие.</p></div><div class="bespoke-marp-note" data-index="31" tabindex="0"><p>Максим: Клон БД с прода с обфусцированные данными. Либо генерируем данные в пустой БД или в БД с уже существующими данными. У нас много генераторов данных для ФТ и АТ, мы можем использовать их.

Фишка - данные, такие как на продуктиве (по количеству и распределению).</p></div><div class="bespoke-marp-note" data-index="32" tabindex="0"><p>Что общего
Алгоритмы + структуры данных = программа
Никлаус Вирт

Стенд с сервисами + тестовые данные = нагрузочный стенд
Инженер НТ

Для тестов НТ данные необходимы. Так или иначе их надо иметь. Обфусцированные, генерирование, любые - они нужны. Да побольше, да побольше
В чем отличия

Максим: Так ведь если данные не такие как на продуктиве, то тест не настоящий!!!!
Надо делать как на продуктиве

Слава: Да, но если не делать данных больше, чем на продуктиве, то как же спрогнозировать нагрузку завтрашнего дня? И вообще, если обезличить данные, то ФИО из Смирнов Вячеслав и Семенов Степан превращается в Иван1 Иванов и Иван2 Иванов, статистика едет, связки ломаются, запросы становятся другими или вообще перестают работать: в одной таблице номер один, а в другой таблице номер другой и ничего не работает.

Если надо тестировать на продуктивных данных, то это без деперсонализации и сразу на продуктиве. Но мы так не делаем</p></div><div class="bespoke-marp-note" data-index="34" tabindex="0"><p>Максим: А мы так делаем. Ха, ха!!!

Не тестируется то, что списывает деньги, вроде.... Но сервисы, не списывающие деньги, можно нагрузить. Тестирование проводится вместе с командами, вместе с SRE в моменте. Подается нагрузка и оценивается, как система себя ведет. И нагрузка отключается, если что-то идет не так

Фишка в том, что можно проверить всю цепочку интеграций.

Мы также можем перенаправлять трафик. За счет балансировки нагрузки. Нагрузить одну станцию из 4-х не на 25% нагрузки, а на 60% или 100%, посмотреть, как она себя поведет под большей нагрузкой. Эта нагрузка, которая создается реальными клиентами, не нагрузочными тестами.

Также можно вывести ноду из ротации и нагрузить ее синтетической нагрузкой.

Максим: А почемы вы так не делаете?!

Слава: Так это же рискованно. Разве у вас ничего не ломалось при этом и все шло как надо?</p></div><div class="bespoke-marp-note" data-index="35" tabindex="0"><p>Максим: Нет, не ломалось. Мы не доводим нагрузку до 100%. 100% меряется по SLA: утилизация, время отклика и APDEX.

Если так не делать, не тестировать на проде. То сложно получить реальную нагрузку. И не получится протестировать всю систему.</p></div><div class="bespoke-marp-note" data-index="36" tabindex="0"><p>Мы на продуктиве не тестируем.
Регулярно запрашиваем и анализируем статистику с прода. По SQL-запросам в частности. Иногда профилируем проблемные сервисы под живой нагрузкой.</p></div><div class="bespoke-marp-note" data-index="37" tabindex="0"><p>Слава: Все протестировать нельзя. За всеми графиками не уследить, получим просто Alert Storm. Можно протестировать все в рамках одного вида теста, контролируемого, более узкого

Максим: Да, но это зависит от вида теста</p></div><div class="bespoke-marp-note" data-index="39" tabindex="0"><p>Слава: Интеграционные тесты на поиск максимума и подтверждение
Основные тесты - регрессионные.

Дополнительные тесты - просто сделать замеры в браузере. Спрофилировать и найти узкие места. А также такие же тесты но на больших объемах данных. Тоже просто в браузере. Эмуляция работы крупных клиентов. По вкладку в количество и качество дефектов, они такие же как регрессионные.

Третья группа тестов - уменьшенный регрессионный. На подтверждение исправления дефектов. Делается на небольшом стенде в четыре шага:
Эталонный тест
Установка обновления
Контрольный тест
Сравнение</p></div><div class="bespoke-marp-note" data-index="40" tabindex="0"><p>Максим: Тесты распределены по уровням зрелости процесса НТ в команде. Начало это макс.перфы, подтверждение и надежности - в виде бенчмарков. Затем уже интеграция, хаузтестинг и т.д.
У нас все эти же тесты есть.
Но если мы пишем тесты сами, то делаем команде лишь Debug (Smoke) и MaxPerf с подтверждением. Это минимальный набор тестов.

А все остальное команды делают сами по крайней мере мы к этому идем. Вот список остальных тестов:
интеграция, между другими компонентами
Chaos Testing
объёмное
повторение проблем прода
стресс тестирование
Squeeze тестирование</p></div><div class="bespoke-marp-note" data-index="41" tabindex="0"><p>Слава: Сквиз тестинг, это что такое?

Максим: Это бред из нетфликса. Ты выводишь одну ноду из ротации. И грузишь ее до упора. Получаешь значение в RPS. Скейлишь и нагружаешь ее снова.

Слава: У нас это делается так. Убраны лимиты подам. И выставлены их скейлинги.
1. Перезапустить сервисы и нагрузить тестом MaxPerf
2. Получить kubectl top (CPU Time поды / длительность жизни поды) и сгруппировать результаты по сервисам
3. Профилировать то, что потребило больше всех CPU и память
4. Скейлить, как запасной вариант

Максим: Вы делаете лишь стандартные тесты. И не раскрываете все ситуации. А мне кажется, что надо делать так, чтобы разработчики запускали быстрые бенчмарки у себя. И не ждали нагрузочного контура. 

Разработчики запускают тесты на своих машинах.

Слава: А как же автоматизация?

Максим: Да, мы идем к тому, чтобы бенчмаки запускались тоже в CI/CD, поднималась пода с сервисом, обстреливалась тестом и получался результат.</p></div><div class="bespoke-marp-note" data-index="44" tabindex="0"><p>Максим:</p></div><div class="bespoke-marp-note" data-index="45" tabindex="0"><p>Максим: в основе у нас Gitlab CI, Nexus, Docker.
А мы YAML-Developer-ы, pipeline в Gitlab-CI похож на Docker-Compose + Jenkins.
Плюс: все в одном месте, все стандартизируется и переиспользуется. За счет Gitlib-CI и Docker. Запуски выполняются на любом генераторе нагрузки. У нас несколько видов под разные типы тестов.</p></div><div class="bespoke-marp-note" data-index="46" tabindex="0"><p>Максим: А почему вы не делаете также?

Слава: Мы, возможно, придем к такому. Сейчас у нас свой Jenkins и свои агенты, чтобы не замедлять другие команды. Чтобы тесты производительности, которые выполняются долго и требуют много ресурсов, никак не замедляли процессы сборок команд разработки. Но мы планируем в этом году перейти в общебанковскую инфраструктуру.
А вот про запуск тестов из Docker пока не думал, это интересно</p></div><div class="bespoke-marp-note" data-index="52" tabindex="0"><p>Слава: Настроенные правила парсинга логов на поля в logstash, работа на основе ELK
Мы настроили всем сервисам единый формат логирования. Передав свои logback-конфиги в каждый. А для единого формата логирования уже настроен парсер лога на поля: время, уровень, сервис, поток, класс, сообщение, исключение. Также logtash позволяет создавать поля на основе полей, кодом на JRuby, поэтому сообщения маскируются, чтобы по ним можно было делать группировку.
Такие структурированные логи позволяют быстро выявлять проблемы.

Ранее, когда не был настроен единый формат логов и парсинг, использовались скрипты на python, которые выгружали логи сервиса из ELK в формате CSV и парсили его, а результат парсинга сохранялся в InfluxDB в виде статистики. Теперь исходные данные и поля для группировки в ELK.</p></div><div class="bespoke-marp-note" data-index="54" tabindex="0"><p>Максим: у нас внутренняя разработка как средство мониторинга логов на основе ELK. В нее выгружаются логи всех приложений и мы осуществляем поиск проблем и алертинг на их основе. Команда разрабатывающая продукт сама заводит логи в данную систему и заинтересована в их поддержании и настройки алертов в актуальном состоянии.</p></div><div class="bespoke-marp-note" data-index="60" tabindex="0"><p>Максим: мы не пишем отчеты вообще. Да, это так. Сейчас расскажу как мы к этому пришли. У нас все логи собираются в 1 месте, все графики мониторингов тоже в 1 месте и данные с генераторов нагрузки у нас тоже в 1 месте, а ещё у нас же есть требования SLA и NFR, без которых мы не запускаем НТ. А значит у нас есть все, чтобы сделать отчёт мечты - автоматически. Да, хочется сразу оговориться, что мы ещё не научились определять уровни макс.перфа и т.п. но вот сравнивать тесты регресса можем, а также подгружать все графики в 1 место. Все графики и анализ привязываются к запускам теста из gitlab-ci и можно провалиться в каждый отчет и посмотреть как и что шло.</p></div><div class="bespoke-marp-note" data-index="65" tabindex="0"><p>Кто делает запуски тестов

Максим: Мы запускаем лишь базовые тесты, когда сами пишем скрипты как я говорил ранее, дальше команда сама. Если команда писала сама скрипты, то она сама и всё запускает. Да, мы можем проконсультировать в любой момент команду по любому вопросу связанному с порядком запуска или анализом проблем.

Кто поддерживает тесты?

Максим: у нас это на команде разрабатывающей проект т.к. ещё раз повторюсь она отвечает за его качество и команде НТ физически не может уследить за всеми изменениями во всех системах ГК Тинькофф какого бы размера она не была, мы это приняли как факт. Да, мы конечно помогаем в сложных ситуациях или когда команда не знает как и что поменять в скрипте. Также мы можем расширить функционал тестов по запросу команды например добавить новый протокол или сделать сложный сценарий, но чаще мы лишь делаем пример на скажем 1 запрос, а команда дальше сама дорабатывает свой скрипт с нашими консультациями. Почему так? Возможно это выглядит жестоко, но только так можно научить людей, что-то делать самих т.к. сделав все за них они при новой любой проблеме снова придут к вам, а это уже контрпродуктивно.</p></div><script>/*!! License: https://unpkg.com/@marp-team/marp-cli@1.4.0/lib/bespoke.js.LICENSE.txt */
!function(){"use strict";const e=document.body,t=(...e)=>history.replaceState(...e),n="presenter",r="next",o=["",n,r],a="data-bespoke-marp-",i=(e,{protocol:t,host:n,pathname:r,hash:o}=location)=>{const a=e.toString();return`${t}//${n}${r}${a?"?":""}${a}${o}`},s=()=>e.dataset.bespokeView,l=e=>new URLSearchParams(location.search).get(e),c=(e,n={})=>{var r;const o={location,setter:t,...n},a=new URLSearchParams(o.location.search);for(const t of Object.keys(e)){const n=e[t];"string"==typeof n?a.set(t,n):a.delete(t)}try{o.setter({...null!==(r=window.history.state)&&void 0!==r?r:{}},"",i(a,o.location))}catch(e){console.error(e)}},d=(()=>{const e="bespoke-marp";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}})(),f=e=>{try{return localStorage.getItem(e)}catch(e){return null}},u=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch(e){return!1}},m=e=>{try{return localStorage.removeItem(e),!0}catch(e){return!1}},g=(e,t)=>{const n="aria-hidden";t?e.setAttribute(n,"true"):e.removeAttribute(n)},p=e=>{e.parent.classList.add("bespoke-marp-parent"),e.slides.forEach((e=>e.classList.add("bespoke-marp-slide"))),e.on("activate",(t=>{const n="bespoke-marp-active",r=t.slide,o=r.classList,a=!o.contains(n);if(e.slides.forEach((e=>{e.classList.remove(n),g(e,!0)})),o.add(n),g(r,!1),a){const e=`${n}-ready`;o.add(e),document.body.clientHeight,o.remove(e)}}))},v=e=>{let t=0,n=0;Object.defineProperty(e,"fragments",{enumerable:!0,value:e.slides.map((e=>[null,...e.querySelectorAll("[data-marpit-fragment]")]))});const r=r=>void 0!==e.fragments[t][n+r],o=(r,o)=>{t=r,n=o,e.fragments.forEach(((e,t)=>{e.forEach(((e,n)=>{if(null==e)return;const i=t<r||t===r&&n<=o;e.setAttribute(`${a}fragment`,(i?"":"in")+"active");const s=`${a}current-fragment`;t===r&&n===o?e.setAttribute(s,"current"):e.removeAttribute(s)}))})),e.fragmentIndex=o;const i={slide:e.slides[r],index:r,fragments:e.fragments[r],fragmentIndex:o};e.fire("fragment",i)};e.on("next",(({fragment:a=!0})=>{if(a){if(r(1))return o(t,n+1),!1;const a=t+1;e.fragments[a]&&o(a,0)}else{const r=e.fragments[t].length;if(n+1<r)return o(t,r-1),!1;const a=e.fragments[t+1];a&&o(t+1,a.length-1)}})),e.on("prev",(({fragment:a=!0})=>{if(r(-1)&&a)return o(t,n-1),!1;const i=t-1;e.fragments[i]&&o(i,e.fragments[i].length-1)})),e.on("slide",(({index:t,fragment:n})=>{let r=0;if(void 0!==n){const o=e.fragments[t];if(o){const{length:e}=o;r=-1===n?e-1:Math.min(Math.max(n,0),e-1)}}o(t,r)})),o(0,0)},h=document,y=()=>!(!h.fullscreenEnabled&&!h.webkitFullscreenEnabled),x=()=>!(!h.fullscreenElement&&!h.webkitFullscreenElement),w=e=>{e.fullscreen=()=>{y()&&(async()=>{return x()?null===(e=h.exitFullscreen||h.webkitExitFullscreen)||void 0===e?void 0:e.call(h):((e=h.body)=>{var t;return null===(t=e.requestFullscreen||e.webkitRequestFullscreen)||void 0===t?void 0:t.call(e)})();var e})()},document.addEventListener("keydown",(t=>{"f"!==t.key&&"F11"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!y()||(e.fullscreen(),t.preventDefault())}))},b="bespoke-marp-inactive",k=(e=2e3)=>({parent:t,fire:n})=>{const r=t.classList,o=e=>n(`marp-${e?"":"in"}active`);let a;const i=()=>{a&&clearTimeout(a),a=setTimeout((()=>{r.add(b),o()}),e),r.contains(b)&&(r.remove(b),o(!0))};for(const e of["mousedown","mousemove","touchend"])document.addEventListener(e,i);setTimeout(i,0)},E=["AUDIO","BUTTON","INPUT","SELECT","TEXTAREA","VIDEO"],L=e=>{e.parent.addEventListener("keydown",(e=>{if(!e.target)return;const t=e.target;(E.includes(t.nodeName)||"true"===t.contentEditable)&&e.stopPropagation()}))},$=e=>{window.addEventListener("load",(()=>{for(const t of e.slides){const e=t.querySelector("[data-marp-fitting]")?"":"hideable";t.setAttribute(`${a}load`,e)}}))},P=({interval:e=250}={})=>t=>{document.addEventListener("keydown",(e=>{if(" "===e.key&&e.shiftKey)t.prev();else if("ArrowLeft"===e.key||"ArrowUp"===e.key||"PageUp"===e.key)t.prev({fragment:!e.shiftKey});else if(" "!==e.key||e.shiftKey)if("ArrowRight"===e.key||"ArrowDown"===e.key||"PageDown"===e.key)t.next({fragment:!e.shiftKey});else if("End"===e.key)t.slide(t.slides.length-1,{fragment:-1});else{if("Home"!==e.key)return;t.slide(0)}else t.next();e.preventDefault()}));let n,r,o=0;t.parent.addEventListener("wheel",(a=>{let i=!1;const s=(e,t)=>{e&&(i=i||((e,t)=>((e,t)=>{const n="X"===t?"Width":"Height";return e[`client${n}`]<e[`scroll${n}`]})(e,t)&&((e,t)=>{const{overflow:n}=e,r=e[`overflow${t}`];return"auto"===n||"scroll"===n||"auto"===r||"scroll"===r})(getComputedStyle(e),t))(e,t)),(null==e?void 0:e.parentElement)&&s(e.parentElement,t)};if(0!==a.deltaX&&s(a.target,"X"),0!==a.deltaY&&s(a.target,"Y"),i)return;a.preventDefault();const l=Math.sqrt(a.deltaX**2+a.deltaY**2);if(void 0!==a.wheelDelta){if(void 0===a.webkitForce&&Math.abs(a.wheelDelta)<40)return;if(a.deltaMode===a.DOM_DELTA_PIXEL&&l<4)return}else if(a.deltaMode===a.DOM_DELTA_PIXEL&&l<12)return;r&&clearTimeout(r),r=setTimeout((()=>{n=0}),e);const c=Date.now()-o<e,d=l<=n;if(n=l,c||d)return;let f;(a.deltaX>0||a.deltaY>0)&&(f="next"),(a.deltaX<0||a.deltaY<0)&&(f="prev"),f&&(t[f](),o=Date.now())}))},S=(e=".bespoke-marp-osc")=>{const t=document.querySelector(e);if(!t)return()=>{};const n=(e,n)=>{t.querySelectorAll(`[${a}osc=${JSON.stringify(e)}]`).forEach(n)};return y()||n("fullscreen",(e=>e.style.display="none")),d||n("presenter",(e=>{e.disabled=!0,e.title="Presenter view is disabled due to restricted localStorage."})),e=>{t.addEventListener("click",(t=>{if(t.target instanceof HTMLElement){const{bespokeMarpOsc:n}=t.target.dataset;n&&t.target.blur();const r={fragment:!t.shiftKey};"next"===n?e.next(r):"prev"===n?e.prev(r):"fullscreen"===n?null==e||e.fullscreen():"presenter"===n&&e.openPresenterView()}})),e.parent.appendChild(t),e.on("activate",(({index:t})=>{n("page",(n=>n.textContent=`Page ${t+1} of ${e.slides.length}`))})),e.on("fragment",(({index:t,fragments:r,fragmentIndex:o})=>{n("prev",(e=>e.disabled=0===t&&0===o)),n("next",(n=>n.disabled=t===e.slides.length-1&&o===r.length-1))})),e.on("marp-active",(()=>g(t,!1))),e.on("marp-inactive",(()=>g(t,!0))),y()&&(e=>{for(const t of["","webkit"])h.addEventListener(t+"fullscreenchange",e)})((()=>n("fullscreen",(e=>e.classList.toggle("exit",y()&&x())))))}},I=e=>{window.addEventListener("message",(t=>{if(t.origin!==window.origin)return;const[n,r]=t.data.split(":");if("navigate"===n){const[t,n]=r.split(",");let o=Number.parseInt(t,10),a=Number.parseInt(n,10)+1;a>=e.fragments[o].length&&(o+=1,a=0),e.slide(o,{fragment:a})}}))};var T=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];let A=e=>String(e).replace(/[&<>"']/g,(e=>`&${C[e]};`)),C={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},N="dangerouslySetInnerHTML",K={className:"class",htmlFor:"for"},O={};function D(e,t){let n=[],r="";t=t||{};for(let e=arguments.length;e-- >2;)n.push(arguments[e]);if("function"==typeof e)return t.children=n.reverse(),e(t);if(e){if(r+="<"+e,t)for(let e in t)!1!==t[e]&&null!=t[e]&&e!==N&&(r+=` ${K[e]?K[e]:A(e)}="${A(t[e])}"`);r+=">"}if(-1===T.indexOf(e)){if(t[N])r+=t[N].__html;else for(;n.length;){let e=n.pop();if(e)if(e.pop)for(let t=e.length;t--;)n.push(e[t]);else r+=!0===O[e]?e:A(e)}r+=e?`</${e}>`:""}return O[r]=!0,r}const M=({children:e})=>D(null,null,...e),q="bespoke-marp-presenter-",_={container:`${q}container`,next:`${q}next`,nextContainer:`${q}next-container`,noteContainer:`${q}note-container`,infoContainer:`${q}info-container`,infoPage:`${q}info-page`,infoPageText:`${q}info-page-text`,infoPagePrev:`${q}info-page-prev`,infoPageNext:`${q}info-page-next`,infoTime:`${q}info-time`,infoTimer:`${q}info-timer`},U=e=>{const{title:t}=document;document.title="[Presenter view]"+(t?` - ${t}`:"");const n={},r=e=>(n[e]=n[e]||document.querySelector(`.${e}`),n[e]);document.body.appendChild((e=>{const t=document.createElement("div");return t.className=_.container,t.appendChild(e),t.insertAdjacentHTML("beforeend",D(M,null,D("div",{class:_.nextContainer},D("iframe",{class:_.next,src:"?view=next"})),D("div",{class:_.noteContainer}),D("div",{class:_.infoContainer},D("div",{class:_.infoPage},D("button",{class:_.infoPagePrev,tabindex:"-1",title:"Previous"},"Previous"),D("span",{class:_.infoPageText}),D("button",{class:_.infoPageNext,tabindex:"-1",title:"Next"},"Next")),D("time",{class:_.infoTime,title:"Current time"}),D("div",{class:_.infoTimer})))),t})(e.parent)),(e=>{r(_.nextContainer).addEventListener("click",(()=>e.next()));const t=r(_.next),n=(o=t,(e,t)=>{var n;return null===(n=o.contentWindow)||void 0===n?void 0:n.postMessage(`navigate:${e},${t}`,"null"===window.origin?"*":window.origin)});var o;t.addEventListener("load",(()=>{r(_.nextContainer).classList.add("active"),n(e.slide(),e.fragmentIndex),e.on("fragment",(({index:e,fragmentIndex:t})=>n(e,t)))}));const a=document.querySelectorAll(".bespoke-marp-note");a.forEach((e=>{e.addEventListener("keydown",(e=>e.stopPropagation())),r(_.noteContainer).appendChild(e)})),e.on("activate",(()=>a.forEach((t=>t.classList.toggle("active",t.dataset.index==e.slide()))))),e.on("activate",(({index:t})=>{r(_.infoPageText).textContent=`${t+1} / ${e.slides.length}`}));const i=r(_.infoPagePrev),s=r(_.infoPageNext);i.addEventListener("click",(t=>{i.blur(),e.prev({fragment:!t.shiftKey})})),s.addEventListener("click",(t=>{s.blur(),e.next({fragment:!t.shiftKey})})),e.on("fragment",(({index:t,fragments:n,fragmentIndex:r})=>{i.disabled=0===t&&0===r,s.disabled=t===e.slides.length-1&&r===n.length-1}));const l=()=>r(_.infoTime).textContent=(new Date).toLocaleTimeString();l(),setInterval(l,250)})(e)},V=e=>{if(!(e=>e.syncKey&&"string"==typeof e.syncKey)(e))throw new Error("The current instance of Bespoke.js is invalid for Marp bespoke presenter plugin.");Object.defineProperties(e,{openPresenterView:{enumerable:!0,value:X},presenterUrl:{enumerable:!0,get:F}}),d&&document.addEventListener("keydown",(t=>{"p"!==t.key||t.altKey||t.ctrlKey||t.metaKey||(t.preventDefault(),e.openPresenterView())}))};function X(){const{max:e,floor:t}=Math,n=e(t(.85*window.innerWidth),640),r=e(t(.85*window.innerHeight),360);return window.open(this.presenterUrl,q+this.syncKey,`width=${n},height=${r},menubar=no,toolbar=no`)}function F(){const e=new URLSearchParams(location.search);return e.set("view","presenter"),e.set("sync",this.syncKey),i(e)}const B=e=>{const t=s();return t===r&&e.appendChild(document.createElement("span")),{"":V,[n]:U,[r]:I}[t]},R=e=>{e.on("activate",(t=>{document.querySelectorAll(".bespoke-progress-parent > .bespoke-progress-bar").forEach((n=>{n.style.flexBasis=100*t.index/(e.slides.length-1)+"%"}))}))},j=e=>{const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t},H=(e={})=>{const t={history:!0,...e};return e=>{let n=!0;const r=e=>{const t=n;try{return n=!0,e()}finally{n=t}},o=(t={fragment:!0})=>{((t,n)=>{const{min:r,max:o}=Math,{fragments:a,slides:i}=e,s=o(0,r(t,i.length-1)),l=o(0,r(n||0,a[s].length-1));s===e.slide()&&l===e.fragmentIndex||e.slide(s,{fragment:l})})((j(location.hash.slice(1))||1)-1,t.fragment?j(l("f")||""):null)};e.on("fragment",(({index:e,fragmentIndex:r})=>{n||c({f:0===r||r.toString()},{location:{...location,hash:`#${e+1}`},setter:(...e)=>t.history?history.pushState(...e):history.replaceState(...e)})})),setTimeout((()=>{o(),window.addEventListener("hashchange",(()=>r((()=>{o({fragment:!1}),c({f:void 0})})))),window.addEventListener("popstate",(()=>{n||r((()=>o()))})),n=!1}),0)}},Y=(e={})=>{var n;const r=e.key||(null===(n=window.history.state)||void 0===n?void 0:n.marpBespokeSyncKey)||Math.random().toString(36).slice(2),o=`bespoke-marp-sync-${r}`;var a;a={marpBespokeSyncKey:r},c({},{setter:(e,...n)=>t({...e,...a},...n)});const i=()=>{const e=f(o);return e?JSON.parse(e):Object.create(null)},s=e=>{const t=i(),n={...t,...e(t)};return u(o,JSON.stringify(n)),n},l=()=>{window.removeEventListener("pageshow",l),s((e=>({reference:(e.reference||0)+1})))};return e=>{l(),Object.defineProperty(e,"syncKey",{value:r,enumerable:!0});let t=!0;setTimeout((()=>{e.on("fragment",(e=>{t&&s((()=>({index:e.index,fragmentIndex:e.fragmentIndex})))}))}),0),window.addEventListener("storage",(n=>{if(n.key===o&&n.oldValue&&n.newValue){const r=JSON.parse(n.oldValue),o=JSON.parse(n.newValue);if(r.index!==o.index||r.fragmentIndex!==o.fragmentIndex)try{t=!1,e.slide(o.index,{fragment:o.fragmentIndex})}finally{t=!0}}}));const n=()=>{const{reference:e}=i();void 0===e||e<=1?m(o):s((()=>({reference:e-1})))};window.addEventListener("pagehide",(e=>{e.persisted&&window.addEventListener("pageshow",l),n()})),e.on("destroy",n)}},{PI:J,abs:W,sqrt:z,atan2:G}=Math,Q={passive:!0},Z=({slope:e=-.7,swipeThreshold:t=30}={})=>n=>{let r;const o=n.parent,a=e=>{const t=o.getBoundingClientRect();return{x:e.pageX-(t.left+t.right)/2,y:e.pageY-(t.top+t.bottom)/2}};o.addEventListener("touchstart",(({touches:e})=>{r=1===e.length?a(e[0]):void 0}),Q),o.addEventListener("touchmove",(e=>{if(r)if(1===e.touches.length){e.preventDefault();const t=a(e.touches[0]),n=t.x-r.x,o=t.y-r.y;r.delta=z(W(n)**2+W(o)**2),r.radian=G(n,o)}else r=void 0})),o.addEventListener("touchend",(o=>{if(r){if(r.delta&&r.delta>=t&&r.radian){const t=(r.radian-e+J)%(2*J)-J;n[t<0?"next":"prev"](),o.stopPropagation()}r=void 0}}),Q)},ee="_tA",te=e=>{const t=document.documentTransition;if(!t)return;let n;e._tP=!1;const r=(n,{back:r,cond:o})=>a=>{const i=e.slides[e.slide()].querySelector("section[data-transition]");if(!i)return!0;const s=document.querySelector(".bespoke-marp-osc"),l=s?[s]:void 0;if(e._tP){if(a._tA){e._tP=!1;try{t.start({sharedElements:l}).catch((()=>{}))}catch(e){}return!0}}else{if(!o(a))return!0;e._tP=t.prepare({rootTransition:a.back||r?i.dataset.transitionBack:i.dataset.transition,sharedElements:l}).then((()=>n(a))).catch((()=>n(a)))}return!1};e.on("prev",r((t=>e.prev({...t,[ee]:!0})),{back:!0,cond:e=>{var t;return e.index>0&&!((null===(t=e.fragment)||void 0===t||t)&&n.fragmentIndex>0)}})),e.on("next",r((t=>e.next({...t,[ee]:!0})),{cond:t=>t.index+1<e.slides.length&&!(n.fragmentIndex+1<n.fragments.length)})),setTimeout((()=>{e.on("slide",r((t=>e.slide(t.index,{...t,[ee]:!0})),{cond:t=>{const n=e.slide();return t.index!==n&&(t.back=t.index<n,!0)}}))}),0),e.on("fragment",(e=>{n=e}))};let ne;const re=()=>(void 0===ne&&(ne="wakeLock"in navigator&&navigator.wakeLock),ne),oe=async()=>{const e=re();if(e)try{return await e.request("screen")}catch(e){console.warn(e)}return null},ae=async()=>{if(!re())return;let e;const t=()=>{e&&"visible"===document.visibilityState&&oe()};for(const e of["visibilitychange","fullscreenchange"])document.addEventListener(e,t);return e=await oe(),e};((t=document.getElementById("p"))=>{(()=>{const t=l("view");e.dataset.bespokeView=t===r||t===n?t:""})();const a=(e=>{const t=l(e);return c({[e]:void 0}),t})("sync")||void 0;var i,d,f,u,m,g,h,y,x,b,E,I;i=t,d=((...e)=>{const t=o.findIndex((e=>s()===e));return e.map((([e,n])=>e[t]&&n)).filter((e=>e))})([[1,1,0],Y({key:a})],[[1,1,1],B(t)],[[1,1,0],L],[[1,1,1],p],[[1,0,0],k()],[[1,1,1],$],[[1,1,1],H({history:!1})],[[1,1,0],P()],[[1,1,0],w],[[1,0,0],R],[[1,1,0],Z()],[[1,0,0],S()],[[1,0,0],te],[[1,1,1],v],[[1,1,0],ae]),u=1===(i.parent||i).nodeType?i.parent||i:document.querySelector(i.parent||i),m=[].filter.call("string"==typeof i.slides?u.querySelectorAll(i.slides):i.slides||u.children,(function(e){return"SCRIPT"!==e.nodeName})),g={},h=function(e,t){return(t=t||{}).index=m.indexOf(e),t.slide=e,t},b=function(e,t){m[e]&&(f&&x("deactivate",h(f,t)),f=m[e],x("activate",h(f,t)))},E=function(e,t){var n=m.indexOf(f)+e;x(e>0?"next":"prev",h(f,t))&&b(n,t)},I={off:y=function(e,t){g[e]=(g[e]||[]).filter((function(e){return e!==t}))},on:function(e,t){return(g[e]||(g[e]=[])).push(t),y.bind(null,e,t)},fire:x=function(e,t){return(g[e]||[]).reduce((function(e,n){return e&&!1!==n(t)}),!0)},slide:function(e,t){if(!arguments.length)return m.indexOf(f);x("slide",h(m[e],t))&&b(e,t)},next:E.bind(null,1),prev:E.bind(null,-1),parent:u,slides:m,destroy:function(e){x("destroy",h(f,e)),g={}}},(d||[]).forEach((function(e){e(I)})),f||b(0)})()}();</script><script>window.__marpCliWatchWS="ws://localhost:37717/2b9e3e82ce400f7c576d3d587343237db45dd7686ee1fe0533d81c4ebc0915fd";!function(){"use strict";const e=(n,o=!1)=>{const t=new WebSocket(n);return t.addEventListener("open",(()=>{console.info("[Marp CLI] Observing the change of file..."),o&&location.reload()})),t.addEventListener("close",(()=>{console.warn("[Marp CLI] WebSocket for file watcher was disconnected. Try re-connecting in 5000ms..."),setTimeout((()=>e(n,!0)),5e3)})),t.addEventListener("message",(e=>{"reload"===e.data&&location.reload()})),t};(()=>{const n=window.__marpCliWatchWS;n&&e(n)})()}();</script></body></html>